\input{../TeX/base} %BASE!!!
\usepackage{multirow}

\title{\TITOLODOC}
\author{Stefano Dissegna}

\begin{document}

\renewcommand{\insertversion}{0.0} %INSERIRE LA VERSIONE QUI DENTRO STILE x.x.xx
\renewcommand{\TITOLODOC}{Definizione di Prodotto} %INSERIRE IL TITOLO DEL DOCUMENTO DA FAR COMPARIRE A PIE PAGINA
\renewcommand{\glosspath}{.\glossario} %INSERIRE PERCORSO RELATIVO

%%%%%%%%%%%%%%%%%%%%%%PARTE DA NON MODIFICARE%%%%%%%%%%%%%%%%%
\begin{titlepage}
\begin{center}
	\begin{Large}	\today \end{Large}
\end{center}

\vspace{20pt}

\begin{center}
	\begin{Huge}
				\textbf{\ajax}
	\end{Huge}
\end{center}			

\begin{center}
	\begin{large}
				\textbf{Software per il Disegno Grafico\\ in Tecnologie Web}
	\end{large}
\end{center}			

\vspace{20pt}

\begin{center}
\includegraphics[width=150pt]{../logo/logo}
\end{center}

\vspace{170pt}
\begin{center} %INSERIRE ALL'INTERNO IL TITOLO DOCUMENTO CHE COMPARIRA NELLA PAGINA INIZIALE				
	\begin{Huge}
				\textbf{\TITOLODOC}
	\end{Huge}
			\\
\end{center}
\vspace{190pt}
\begin{center}
Versione: \insertversion
\end{center}
\end{titlepage}

\newpage
%%%%%%%%%%%%%%%%%%%%%%FINE PARTE DA NON MODIFICARE%%%%%%%%%%%%%%%%%

\begin{center} %INSERIRE ALL'INTERNO IL TITOLO DOCUMENTO CHE COMPARIRA NELLA PAGINA INIZIALE
	\begin{Huge}	
				\textbf{\TITOLODOC}
			\\
	\end{Huge}
\end{center}

%\setlength{\parindent}{18pt} %settato indentazione di default 
\section*{\LARGE Sommario:} %SEZIONE SOMMARIO
Il presente documento descrive in modo dettagliato le classi e i relativi metodi che andranno a comporre il sistema.

 %SEZIONE SOMMARIO
\indent \indent

\section*{\LARGE Stato del documento:}
\indent \indent
	Formale Esterno

\section*{\LARGE Redazione:}
	\begin{table}[!h]
		\begin{center}
			\begin{tabular}
				{|c|c|}
				\hline
				%%%%%%%%%%%%%%INTESTAZIONE COLONNE%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
				\multicolumn{2}{|c|}{ \textbf{Redazione} } \\
				\hline
				\textbf{Fase} & \textbf{Redattori} \\
				%%%%%%%%%%%%%%FINE INTESTAZIONE COLONNE%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
				\hline
				%%%%%%%%%%% PARTE DA MODIFICARE %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%		
				\multirow{2}{*}{RPP-RQ} & \\
										& \\
				\hline
				\multirow{1}{*}{RQ-RA} & \\
												
				\hline
				%%%%%%%%%%% FINE PARTE DA MODIFICARE %%%%%%%%%%%%%%%%%%%%%%%%%%%
			\end{tabular}
			\caption{Lista Redattori} %INSERIRE DIDASCALIA - SE NECESSARIA - 
			\label{tabredazione}
		\end{center}
	\end{table}
	
	
\section*{\LARGE Verifica:}
\begin{table}[!h]
	\begin{center}
		\begin{tabular}
			{|c|c|}
			\hline
			%%%%%INTESTAZIONE COLONNE%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
			\multicolumn{2}{|c|}{ \textbf{Verifica} } \\
			\hline
			\textbf{Fase} & \textbf{Verificatori} \\
			%%%%%%%%%%%%%%FINE INTESTAZIONE COLONNE%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
			\hline
			%%%%%%%%%%% PARTE DA MODIFICARE %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%		
			\multirow{1}{*}{RPP-RQ} &  \\
									
			\hline
			\multirow{1}{*}{RQ-RA} & \\
									
			\hline
			%%%%%%%%%%% FINE PARTE DA MODIFICARE %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
		\end{tabular}
		\caption{Lista Verificatori} %INSERIRE DIDASCALIA - SE NECESSARIA - 
		\label{tabverifica}
	\end{center}
\end{table}

\textbf{}
\newpage
\section*{\LARGE Lista di Distribuzione:}

	\begin{elenconumerato}{\normindent}
		\item WebShape 
		\item I committenti Conte Renato e Vardanega Tullio in rappresentanza \\  dell'azienda proponente Zucchetti SPA
	\end{elenconumerato}

\section*{\Large Registro delle Modifiche:}


\begin{center}
	\begin{table}[h]
		  \begin{tabular*}
			{1\textwidth}%
				{@{\extracolsep{\fill}}|p{0.1\textwidth}|p{0.54\textwidth}|p{0.26\textwidth}|}
			 \hline
%%%%%%%%%%%%%%INTESTAZIONE COLONNE%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
			\textbf{Versione}  & \textbf{Descrizione} & \textbf{Autore} \\
%%%%%%%%%%%%%%FINE INTESTAZIONE COLONNE%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
		 \hline
%%%%%%%%%%% PARTE DA MODIFICARE %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%		
    	 	0.0 & 	 11$\slash$02$\slash$2009 Bozza & Dissegna Stefano \\

		\hline %%FINE RIGA
%%%%%%%%%%% FINE PARTE DA MODIFICARE %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
		\end{tabular*}
	\caption{didascalia tabella 	MODIFICHE} %INSERIRE DIDASCALIA - SE NECESSARIA - 
	\label{tab:modifiche}
	\end{table}
\end{center}


\newpage
\thispagestyle{fancy}
\tableofcontents
\thispagestyle{fancy}
\newpage

%qui inizia l'indice, che viene creato automaticamente

\sezione{Introduzione}

\subsezione{Scopo del documento}
Il documento descrive a livello di dettaglio l'architettura del sistema.

\subsezione{Scopo del prodotto}
Il software AJAXDRAW \`e proposto per verificare e dimostrare la fattibilit\`a di realizzazione di un'applicazione di disegno grafico, in grado di poter elaborare figure vettoriali primitive e complesse utilizzando le tecnologie web.

\subsezione{Glossario}
All'interno del documento \textit{Glossario}, sono presentati i termini tecnici utilizzati in tutti i documenti. Il glossario \`e fornito in allegato al presente documento.
\subsezione{Riferimenti}
Il presente documento \`e redatto utilizzando le convenzioni inserite nel documento \textit{NormeDiProgetto}, consultabile dal repository pubblico al quale WebShape si appoggia per i suoi progetti.
\subsubsezione{Normativi}
\begin{elencopuntato}[\subsubsecindent]
\item[-] \textit{NormeDiProgetto.pdf}
\item[-] Raccomandazione SVG: \href{http://www.w3.org/TR/SVG11/}{http://www.w3.org/TR/SVG11/}
\item[-] Raccomandazione CSS: \href{http://www.w3.org/TR/CSS21/}{http://www.w3.org/TR/CSS21/}
\item[-] Working Draft HTML 5: \href{http://www.w3.org/TR/html5/}{http://www.w3.org/TR/html5/}
\item[-] Specifiche UML: \href{http://www.omg.org/spec/UML/2.1.2/}{http://www.omg.org/spec/UML/2.1.2/}
\end{elencopuntato}

\sezione{Standard di progetto}
\subsezione{Standard di progettazione architetturale}
La progettazione verr\`a presentata tramite una descrizione testuale delle componenti accompagnata da diagrammi UML.
\subsezione{Standard di documentazione del codice}
Si vedano le \textit{NormeDiprogetto}.
\subsezione{Standard di denominazione di entit\`a e relazioni}
Si vedano le \textit{NormeDiprogetto}.
\subsezione{Standard di programmazione}
Si vedano le \textit{NormeDiprogetto}.
\subsezione{Strumenti di lavoro}
Si vedano le \textit{NormeDiprogetto}.

\sezione{Specifica delle componenti}

\subsezione{ApplicationLogic}

\subsezione{Figure}
\subsubsezione{Tipo, obiettivo e funzione del componente}
Classe astratta che rappresenta una figura generica nel sistema, ovvero un oggetto disegnabile nel canvas.
\subsubsezione{Relazioni d'uso di altre componenti}
Mantiene un'istanza della classe \textit{BoundingRectangle} per rappresentare i limiti della figura. Contiene anche un'istanza di \textit{Colour} che rappresenta il colore del bordo. Deriva, ma non implementa, l'interfaccia \textit{SVGReadable} e l'interfaccia \textit{SVGWritable}, in quanto le sue sottoclassi dovranno essere serializzabili e deserializabili in file SVG.
\subsubsezione{Interfacce e relazioni di uso da altre componenti}
Viene aggregata dalla classe \textit{FigureSet}.
\subsubsezione{Attivit\`a svolte e dati trattati}
\paragrafo{Attributi privati:}
\begin{elencopuntato}[\normindent]
\item[-] \textit{{\_}selected} dice se la figura \`e selezionata
\item[-] \textit{{\_}bounds} \textit{BoundingRectangle} che racchiude la figura
\item[-] \textit{{\_}borderColour} colore del bordo della figura
\end{elencopuntato}
\paragrafo{Metodi pubblici:}
\begin{elencopuntato}[\normindent]
\item[-] \textit{getBounds()} ritorna \textit{{\_}bounds}
\item[-] \textit{getBorderColour()} ritorna \textit{{\_}borderColour}
\item[-]  \textit{draw(canvas)} metodo astratto per disegnare la figura sul canvas.
\item[-]  \textit{getMainPoints} metodo astratto per ottenere i punti della figura manipolabili dall'utente.
\item[-]  \textit{setSelection(value)} permette di selezionare/deselezionare la figura. Modifica \textit{{\_}selected}.
\item[-]  \textit{isSelected()} dice se la figura \`e correntemente selezionata. Ritorna \textit{{\_}selected}.
\item[-]  \textit{eachProperty(fn)} applica la funzione fn ad ogni propriet\`a della figura, ovvero a \textit{{\_}bounds} e \textit{{\_}borderColour}.
\item[-] \textit{drawSelection(canvas)} disegna dei quadratini intorno ai punti principali della figura, ottenuti tramite \textit{getMainPoints}, se la figura \`e selezionata.
\end{elencopuntato}

\subsezione{FigureSet}
\subsubsezione{Tipo, obiettivo e funzione del componente}
Rappresenta una collezione di figure. Tutte le figure disegnate dall'utente sono contenute in questa collezione, la quale ne permette la manipolazione e l'attraversamento. Per cancellare una figura \`e sufficiente rimuoverla dalla collezione.
\subsubsezione{Relazioni d'uso di altre componenti}
Contiene le istanze di \textit{Figure} correntemente attive.
\subsubsezione{Interfacce e relazioni di uso da altre componenti}
Usata dalla classe \textit{SVGWriter} per serializzare in SVG le figure correnti a dall'interfaccia utente per accedere alle figure. Pu\`o venire generata dalla classe \textit{SVGReader} dopo la deserializzazione di un file SVG.
\subsubsezione{Attivit\`a svolte e dati trattati}
\paragrafo{Attributi privati:}
\begin{elencopuntato}[\normindent]
\item[-] \textit{{\_}figures} array contenente le figure.
\end{elencopuntato}
\paragrafo{Metodi pubblici:}
\begin{elencopuntato}[\normindent]
\item[-]  \textit{selectFigure()} permette di selezionare una figura contenente il punto passato come argomento, se tale figura esiste.
\item[-]  \textit{each(fn)} permette di applicare una funzione ad ogni figura. Viene usato per iterare attraverso la collezione. Applica fn ad ogni elemento di \textit{{\_}figures}. 
\item[-]  \textit{add(f)} aggiunge la figura f alla fine di \textit{{\_}figures}.
\item[-]  \textit{rem(f)} rimuove da \textit{{\_}figures} tutte le figure identiche (ovvero aventi lo stesso indirizzo) di f.
\end{elencopuntato}


\subsezione{Property}
\subsubsezione{Tipo, obiettivo e funzione del componente}
Rappresenta una propriet\`a generica di una figura. Le propriet\`a influenzano 
l'aspetto delle diverse figure, e sono modificabili dall'utente.
\subsubsezione{Relazioni d'uso di altre componenti}
Nessuna.
\subsubsezione{Interfacce e relazioni di uso da altre componenti}
Implementata da tutte le propriet\`a concrete delle diverse figure.
\subsubsezione{Attivit\`a svolte e dati trattati}
\begin{elencopuntato}[\normindent]
\item[-] \textit{createWidget} crea un widget grafico che permetter\`a all'utente di modificare la propriet\`a.
\end{elencopuntato}

\subsezione{CSSProperty}
\subsubsezione{Tipo, obiettivo e funzione del componente}
Rappresenta una propriet\`a di una figura che necessita di una rappresentazione conforme ai CSS. Questa rappresentazione \`e necessaria per applicare alcune propriet\`a (come ad esempio il colore) al canvas e per la conversione in SVG. Non \`e presente in modo esplicito nel codice.
\subsubsezione{Relazioni d'uso di altre componenti}
Nessuna.
\subsubsezione{Interfacce e relazioni di uso da altre componenti}
Implementata da \textit{Colour} e \textit{TextFont}. 
\subsubsezione{Attivit\`a svolte e dati trattati}
\begin{elencopuntato}[\normindent]
\item[-] \textit{toCSS} genera una stringa che rappresenta la propriet\`a come propriet\`a CSS.
\end{elencopuntato}

\subsezione{Opacity}
\subsubsezione{Tipo, obiettivo e funzione del componente}
Rappresenta l'opacit\`a di un colore. Mantiene un unico valore che varia nell'intervallo [0, 1]. Se il valore \`e 0 la figura \`e completamente trasparente, se
il valore \`e 1, la figura \`e completamente opaca, ovvero non permette la visualizzazione delle figure sottostanti.
\subsubsezione{Relazioni d'uso di altre componenti}
Nessuna.
\subsubsezione{Interfacce e relazioni di uso da altre componenti}
\textit{Colour} ne mantiene un'istanza.
\subsubsezione{Attivit\`a svolte e dati trattati}
\paragrafo{Attributi privati:}
\begin{elencopuntato}[\normindent]
\item[-] \textit{\_val} un numero contenente il valore dell'opacit\`a.
\end{elencopuntato}
\paragraph{Metodi pubblici:}
\begin{elencopuntato}[\normindent]
\item[-] \textit{get/setVal} permette di ottenere, o di modificare, il valore dell'opacit\`a.
\item[-] \textit{applyToContext(context)} setta il valore \textit{globalAlpha} del contesto grafico al proprio valore interno. Questo valore influenzer\`a l'opacit\`a delle prossime figure disegnate.
\end{elencopuntato}

\subsezione{EdgeNumber}
\subsubsezione{Tipo, obiettivo e funzione del componente}
Rappresenta il numero degli spigoli di un poligono. Questo numero non pu\`o essere inferiore a 3.
\subsubsezione{Relazioni d'uso di altre componenti}
Implementa \textit{Property}.
\subsubsezione{Interfacce e relazioni di uso da altre componenti}
\textit{Polygon} ne mantiene un'istanza.
\subsubsezione{Attivit\`a svolte e dati trattati}
\paragrafo{Attributi privati:}
\begin{elencopuntato}[\normindent]
\item[-] \textit{\_val} il numero dei lati.
\end{elencopuntato}
\paragraph{Metodi pubblici:}
\begin{elencopuntato}[\normindent]
\item[-] \textit{get/setVal} permette di ottenere, o di modificare, il numero dei lati.
\item[-] \textit{createWidget} crea e ritorna un'istanza di \textit{EdgeNumberSetter} passando se stesso come parametro al costruttore.
\end{elencopuntato}


\subsezione{Colour}
\subsubsezione{Tipo, obiettivo e funzione del componente}
Rappresenta un colore come una terna RGB pi\`u l'opacit\`a del colore stesso. Questa rappresentazione trova una corrispondenza diretta sia nel tag <canvas>, sia nel formato SVG.
\subsubsezione{Relazioni d'uso di altre componenti}
Implementa \textit{Property} e \textit{CSSProperty}. Mantiene un'istanza di \textit{Opacity} che rappresenta l'opacit\`a del colore.
\subsubsezione{Interfacce e relazioni di uso da altre componenti}
\textit{Figure} ne mantiene un'istanza per rappresentare il colore del bordo.
\subsubsezione{Attivit\`a svolte e dati trattati}
\paragrafo{Attributi privati:}
\begin{elencopuntato}[\normindent]
\item[-] \textit{\_r} intensit\`a del rosso. Pu\`o valere da 0 a 255.
\item[-] \textit{\_g} intensit\`a del verde. Pu\`o valere da 0 a 255.
\item[-] \textit{\_b} intensit\`a del blu. Pu\`o valere da 0 a 255.
\item[-] \textit{\_o} opacit\`a del colore, di tipo \textit{Opacity}.
\end{elencopuntato}
\paragraph{Metodi pubblici:}
\begin{elencopuntato}[\normindent]
\item[-] \textit{getOpacity()} ritorna l'attributi \textit{{\_}o}.
\item[-] \textit{set(r, g, b, o)} modifica i valori dei quattro attributi.
\item[-] \textit{createWidget()} crea e ritorna un'istanza di \textit{ColourDialog} passando se stesso come parametro al costruttore.
\item[-] \textit{toCSS()} ritorna il colore come una stringa di tipo \"{\#}EEEEEE\" formata da tre coppie di due cifre esadecimali. Le coppie rappresentano rispettivamente il rosso, il verde, il blu. L'opacit\`a viene ignorata da questo metodo.
\item[-] \textit{applyToContext(context)} setta l'attributo \textit{strokeStyle} del contesto grafico alla propria rappresentazione CSS, e richiama il metodo \textit{applyToContext} su \textit{{\_}o} passando \textit{context} come argomento.
\end{elencopuntato}

\subsezione{FillColour}
\subsubsezione{Tipo, obiettivo e funzione del componente}
Rappresenta un colore di riempimento.
\subsubsezione{Relazioni d'uso di altre componenti}
Deriva da \textit{Colour}.
\subsubsezione{Interfacce e relazioni di uso da altre componenti}
\textit{Circle}, \textit{Polygon} e \textit{Rectangle} ne mantengono un'istanza.
\subsubsezione{Attivit\`a svolte e dati trattati}
\paragraph{Metodi pubblici:}
\begin{elencopuntato}[\normindent]
\item[-] \textit{applyToContext(context)} setta l'attributo \textit{fillStyle} del contesto grafico alla propria rappresentazione CSS, e richiama il metodo \textit{applyToContext} su \textit{{\_}o} passando \textit{context} come argomento.
\end{elencopuntato}

\subsezione{TextProperty}
\subsubsezione{Tipo, obiettivo e funzione del componente}
Propriet\`a di un testo grafico. Non serve implementarla in JavaScript.

\subsezione{TextColour}
\subsubsezione{Tipo, obiettivo e funzione del componente}
Rappresenta il colore di un testo.
\subsubsezione{Relazioni d'uso di altre componenti}
Deriva da \textit{FillColour}.
\subsubsezione{Interfacce e relazioni di uso da altre componenti}
Nessuna.
\subsubsezione{Attivit\`a svolte e dati trattati}
\leftskip=36pt{Nessuna.}

\subsezione{TextFont}
\subsubsezione{Tipo, obiettivo e funzione del componente}
Rappresenta il font di un testo. Mantiene il nome del font.
\subsubsezione{Relazioni d'uso di altre componenti}
Deriva da \textit{TextProperty} e implementa \textit{CSSProperty}.
\subsubsezione{Interfacce e relazioni di uso da altre componenti}
Usata dalla classe \textit{Text} che ne mantiene un'istanza.
\subsubsezione{Attivit\`a svolte e dati trattati}
\paragrafo{Attributi privati:}
\begin{elencopuntato}[\normindent]
\item[-] \textit{{\_}name} nome del font.
\end{elencopuntato}
\paragraph{Metodi pubblici:}
\begin{elencopuntato}[\normindent]
\item[-] \textit{toCSS()} ritorna {\_}name.
\item[-] \textit{applyToContext(context)} setta l'attributo \textit{font} del contesto grafico alla propria rappresentazione CSS.
\end{elencopuntato}



\subsezione{SVGWriter}
\subsubsezione{Tipo, obiettivo e funzione del componente}
Si occupa di chiamare il metodo \textit{toSVG} su ogni figura e ritornare il documento SVG che corrisponde alla situazione corrente del canvas.
\subsubsezione{Relazioni d'uso di altre componenti}
Si serve di \textit{SVGGenerator} per creare il documento, del metodo \textit{each} per iterare attraverso la collezione di figure e del metodo \textit{flush} per ritornare il documento come stringa. 
Implementa il metodo \textit{toSVG} dell'interfaccia \textit{SVGWritable}.
\subsubsezione{Interfacce e relazioni di uso da altre componenti}
Nessuna
\subsubsezione{Attivit\`a svolte e dati trattati}
\paragrafo{Metodi pubblici:}
\begin{elencopuntato}[\normindent]
\item[-]  \textit{write()} Chiama il metodo \textit{toSVG} su ogni figura e ritorna il documento SVG.
\end{elencopuntato}

\sezione{Tracciamento della relazione componenti - requisiti}

\end{document}
