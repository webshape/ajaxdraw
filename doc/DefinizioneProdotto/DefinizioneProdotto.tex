\input{../TeX/base} %BASE!!!
\usepackage{multirow}

\title{\TITOLODOC}
\author{Stefano Dissegna}

\begin{document}

\renewcommand{\insertversion}{2.0} %INSERIRE LA VERSIONE QUI DENTRO STILE x.x.xx
\renewcommand{\TITOLODOC}{Definizione di Prodotto} %INSERIRE IL TITOLO DEL DOCUMENTO DA FAR COMPARIRE A PIE PAGINA
\renewcommand{\glosspath}{.\glossario} %INSERIRE PERCORSO RELATIVO

%%%%%%%%%%%%%%%%%%%%%%PARTE DA NON MODIFICARE%%%%%%%%%%%%%%%%%
\begin{titlepage}
\begin{center}
	\begin{Large}	\today \end{Large}
\end{center}

\vspace{20pt}

\begin{center}
	\begin{Huge}
				\textbf{\ajax}
	\end{Huge}
\end{center}			

\begin{center}
	\begin{large}
				\textbf{Software per il Disegno Grafico\\ in Tecnologie Web}
	\end{large}
\end{center}			

\vspace{20pt}

\begin{center}
\includegraphics[width=150pt]{../logo/logo}
\end{center}

\vspace{170pt}
\begin{center} %INSERIRE ALL'INTERNO IL TITOLO DOCUMENTO CHE COMPARIRA NELLA PAGINA INIZIALE				
	\begin{Huge}
				\textbf{\TITOLODOC}
	\end{Huge}
			\\
\end{center}
\vspace{190pt}
\begin{center}
Versione: \insertversion
\end{center}
\end{titlepage}

\newpage
%%%%%%%%%%%%%%%%%%%%%%FINE PARTE DA NON MODIFICARE%%%%%%%%%%%%%%%%%

\begin{center} %INSERIRE ALL'INTERNO IL TITOLO DOCUMENTO CHE COMPARIRA NELLA PAGINA INIZIALE
	\begin{Huge}	
				\textbf{\TITOLODOC}
			\\
	\end{Huge}
\end{center}

%\setlength{\parindent}{18pt} %settato indentazione di default 
\section*{\LARGE Sommario:} %SEZIONE SOMMARIO
Il presente documento descrive in modo dettagliato le classi e i relativi metodi che andranno a comporre il sistema.

 %SEZIONE SOMMARIO
\indent \indent

\section*{\LARGE Stato del documento:}
\indent \indent
	Formale Esterno

\section*{\LARGE Redazione:}
	\begin{table}[!h]
		\begin{center}
			\begin{tabular}
				{|c|c|}
				\hline
				%%%%%%%%%%%%%%INTESTAZIONE COLONNE%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
				\multicolumn{2}{|c|}{ \textbf{Redazione} } \\
				\hline
				\textbf{Fase} & \textbf{Redattori} \\
				%%%%%%%%%%%%%%FINE INTESTAZIONE COLONNE%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
				\hline
				%%%%%%%%%%% PARTE DA MODIFICARE %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%		
				\multirow{6}{*}{RPP-RQ} 
				& Dissegna Stefano \\
				& Bizzotto Piero \\
				& Dal Bosco Davide \\
				& Geremia Mirco \\
				& Cunico Marco \\
				& Rizzo Maurizio \\
				
				\hline
				\multirow{1}{*}{RQ-RA} & \\
												
				\hline
				%%%%%%%%%%% FINE PARTE DA MODIFICARE %%%%%%%%%%%%%%%%%%%%%%%%%%%
			\end{tabular}
			\caption{Lista Redattori} %INSERIRE DIDASCALIA - SE NECESSARIA - 
			\label{tabredazione}
		\end{center}
	\end{table}
	
	
\section*{\LARGE Verifica:}
\begin{table}[!h]
	\begin{center}
		\begin{tabular}
			{|c|c|}
			\hline
			%%%%%INTESTAZIONE COLONNE%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
			\multicolumn{2}{|c|}{ \textbf{Verifica} } \\
			\hline
			\textbf{Fase} & \textbf{Verificatori} \\
			%%%%%%%%%%%%%%FINE INTESTAZIONE COLONNE%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
			\hline
			%%%%%%%%%%% PARTE DA MODIFICARE %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%		
			\multirow{1}{*}{RPP-RQ} &  Carollo Mirko \\
									
			\hline
			\multirow{1}{*}{RQ-RA} & \\
									
			\hline
			%%%%%%%%%%% FINE PARTE DA MODIFICARE %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
		\end{tabular}
		\caption{Lista Verificatori} %INSERIRE DIDASCALIA - SE NECESSARIA - 
		\label{tabverifica}
	\end{center}
\end{table}

\section*{\LARGE Approvazione:}
\begin{table}[!h]
	\begin{center}
		\begin{tabular}
			{|c|c|}
			\hline
			%%%%%INTESTAZIONE COLONNE%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
			\multicolumn{2}{|c|}{ \textbf{Approvazione} } \\
			\hline
			\textbf{Fase} & \textbf{Responsabile} \\
			%%%%%%%%%%%%%%FINE INTESTAZIONE COLONNE%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
			\hline
			%%%%%%%%%%% PARTE DA MODIFICARE %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%		
			\multirow{1}{*}{RPP-RQ} &  Dissegna Stefano \\
									
			\hline
			\multirow{1}{*}{RQ-RA} & \\
									
			\hline
			%%%%%%%%%%% FINE PARTE DA MODIFICARE %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
		\end{tabular}
		\caption{Lista Verificatori} %INSERIRE DIDASCALIA - SE NECESSARIA - 
		\label{tabverifica}
	\end{center}
\end{table}

\textbf{}
\newpage
\section*{\LARGE Lista di Distribuzione:}

	\begin{elenconumerato}{\normindent}
		\item WebShape 
		\item I committenti Conte Renato e Vardanega Tullio in rappresentanza \\  dell'azienda proponente Zucchetti SPA
	\end{elenconumerato}

\section*{\Large Registro delle Modifiche:}


\begin{center}
	\begin{table}[h]
		  \begin{tabular*}
			{1\textwidth}%
				{@{\extracolsep{\fill}}|p{0.1\textwidth}|p{0.54\textwidth}|p{0.26\textwidth}|}
			 \hline
%%%%%%%%%%%%%%INTESTAZIONE COLONNE%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
			\textbf{Versione}  & \textbf{Descrizione} & \textbf{Autore} \\
%%%%%%%%%%%%%%FINE INTESTAZIONE COLONNE%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
		 \hline
%%%%%%%%%%% PARTE DA MODIFICARE %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%	
        2.0 &    22$\slash$03$\slash$2009 Modifiche per rilascio RA & Dissegna Stefano \\
		\hline
        1.4 &    19$\slash$03$\slash$2009 Diagrammi delle Classi suddivisi per GuiLogic & Bizzotto Piero \\
		\hline
        1.3 &    19$\slash$03$\slash$2009 Ulteriori dettagli sull'implementazione dei metodi del sottosistema ApplicationLogic & Dissegna Stefano \\
        \hline
        1.2 &    18$\slash$03$\slash$2009 Maggiori dettagli sull'implementazione dei metodi del sottosistema ApplicationLogic & Dissegna Stefano \\
        \hline
        1.1 &    18$\slash$03$\slash$2009 Rifatti e descritti diagrammi di attivit\`a & Dissegna Stefano \\
        \hline       
        1.0 &    07$\slash$03$\slash$2009 Modifica per rilascio RQ & Dissegna Stefano \\
        \hline        
        0.9 &    25$\slash$02$\slash$2009 Descrizione classi e metodi GUI & Rizzo Maurizio \\
        \hline        
        0.8 &    16$\slash$02$\slash$2009 Descrizione classe Rotation e metodo clone nella classe figure & Rizzo Maurizio \\
        \hline        
        0.7 &    11$\slash$02$\slash$2009 Descritta classe Clean e metodo della classe File & Dal Bosco Davide \\
        \hline	
        0.6 &    09$\slash$02$\slash$2009 Descritte classi Scale, MoveViewButton e aggiornato Visualization & Dissegna Stefano \\
        \hline		
        0.5 &    07$\slash$02$\slash$2009 Descritte classi Request, Server, File e la gestione degli errori & Dal Bosco Davide \\
        \hline
    	0.4 &    06$\slash$02$\slash$2009 Descrizione classi e metodi salvataggio & Cunico Marco \\
		\hline
    	0.3 &    05$\slash$02$\slash$2009 Descrizione classi e metodi caricamento & Geremia Mirco \\
    	\hline
    	0.2 &    03$\slash$02$\slash$2009 Descrizione classi interfaccia grafica & Bizzotto Piero \\
        \hline
        0.1 & 	 03$\slash$02$\slash$2009 Descritte classi e metodi delle figure e delle propriet\`a & Dissegna Stefano \\
		\hline
    	0.0 & 	 02$\slash$02$\slash$2009 Bozza & Dissegna Stefano \\

		\hline %%FINE RIGA
%%%%%%%%%%% FINE PARTE DA MODIFICARE %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
		\end{tabular*}
	\caption{didascalia tabella 	MODIFICHE} %INSERIRE DIDASCALIA - SE NECESSARIA - 
	\label{tab:modifiche}
	\end{table}
\end{center}


\newpage
\thispagestyle{fancy}
\tableofcontents
\thispagestyle{fancy}
\newpage

%qui inizia l'indice, che viene creato automaticamente

\sezione{Introduzione}

\subsezione{Scopo del documento}
Il documento presenta e descrive a livello di dettaglio le componenti del sistema che dovranno essere implementate.

\subsezione{Scopo del prodotto}
Il software AJAXDRAW \`e proposto per verificare e dimostrare la fattibilit\`a di realizzazione di un'applicazione di disegno grafico, in grado di poter elaborare figure vettoriali primitive e complesse utilizzando le tecnologie web.

\subsezione{Glossario}
\leftskip=36pt All'interno del documento \textit{Glossario}, sono presentati i termini tecnici utilizzati in tutti i documenti. Il glossario \`e fornito in allegato al presente documento.

\subsezione{Riferimenti}
Il presente documento \`e redatto utilizzando le convenzioni inserite nel documento \textit{NormeDiProgetto}, consultabile dal repository pubblico al quale WebShape si appoggia per i suoi progetti.
\subsubsezione{Normativi}
\begin{elencopuntato}[\subsubsecindent]
\item[-] \textit{NormeDiProgetto.pdf}
\item[-] Raccomandazione SVG: \href{http://www.w3.org/TR/SVG11/}{http://www.w3.org/TR/SVG11/}
\item[-] Raccomandazione CSS: \href{http://www.w3.org/TR/CSS21/}{http://www.w3.org/TR/CSS21/}
\item[-] Working Draft \underline{HTML 5}: \href{http://www.w3.org/TR/html5/}{http://www.w3.org/TR/html5/}
\item[-] Specifiche UML: \href{http://www.omg.org/spec/UML/2.1.2/}{http://www.omg.org/spec/UML/2.1.2/}
\end{elencopuntato}

\sezione{Standard di progetto}
\subsezione{Standard di progettazione architetturale}
La progettazione verr\`a presentata tramite una descrizione testuale delle componenti accompagnata da diagrammi UML. Per ogni componente si descrive:
\begin{elencopuntato}[\subsecindent]
\item[-] \textit{Tipo, obiettivo e funzione del componente} qui viene descritta il componente (classe) da un punto di vista generale.
\item[-] \textit{Relazioni d'uso di altre componenti} qui vengono descritte le componenti che vengono utilizzate da questo componente e in che modo queste vengano utilizzate.
\item[-] \textit{Interfacce e relazioni di uso da altre componenti} qui vengono elencate le componenti che utilizzano questo componente, e il modo in cui viene utilizzato.
\item[-] \textit{Attivit\`a svolte e dati trattati} suddiviso in due sezioni. \textit{Attributi privati}, dove vengono descritti il tipo e la funzione degli attributi privati della classe e gli eventuali vincoli a cui devono sottostare questi campi. \textit{Metodi pubblici}, dove vengono descritti i metodi che la classe offre verso l'esterno, sia nella loro funzione, sia nei loro dettagli implementativi. La descrizione dei metodi pi\`u complessi \`e accompagnata da un diagramma.
\end{elencopuntato}

\subsezione{Standard di documentazione del codice}
Si vedano le \textit{NormeDiprogetto}, versione 3.0.
\subsezione{Standard di denominazione di entit\`a e relazioni}
Si vedano le \textit{NormeDiprogetto}, versione 3.0.
\subsezione{Standard di programmazione}
Si vedano le \textit{NormeDiprogetto}, versione 3.0.
\subsezione{Strumenti di lavoro}
Si vedano le \textit{NormeDiprogetto}, versione 3.0.
\newpage
\sezione{Specifica delle componenti - GUI }
Si occupa di gestire l'interazione tra l'utente e la logica interna dell'applicazione, descritta in seguito.

\begin{figure}[!ht]
\centering
\includegraphics[scale=0.7]{visual.jpg}
\caption{Classi e loro relazioni - Canvas e Visualizzazione}
\end{figure}

\subsezione{Page}
\subsubsezione{Tipo, obiettivo e funzione del componente}
Classe concreta che rappresenta la pagina \underline{web} visualizzata dall'utente tramite l'internet \underline{browser}, utilizzata principalmente per il riconoscimento del browser e per operazioni da questo dipendenti.
\subsubsezione{Relazioni d'uso di altre componenti}
Nessuna.
\subsubsezione{Interfacce e relazioni di uso da altre componenti}
Nessuna.
\subsubsezione{Attivit\`a svolte e dati trattati}
\paragrafo{Attributi privati:}
\begin{elencopuntato}[\subsubsecindent]
\item[-] \textit{{\_}browserName} nome del browser utilizzato;
\item[-] \textit{{\_}browserVersion} versione del browser utilizzato;
\end{elencopuntato}
\paragrafo{Metodi pubblici:}
\begin{elencopuntato}[\subsubsecindent]
\item[-] \textit{getBrowserName()} ritorna \textit{{\_}browserName};
\item[-] \textit{getBrowserVersion()} ritorna \textit{{\_}browserVersion};
\item[-] \textit{activateStylesheet(sheetref)} attiva un foglio di stile dopo averne ricevuto il nome da \textit{loadStyleSheet}, analizzando gli elementi \textit{link} che si riferiscono ai fogli CSS alternativi presenti nella pagina HTML principale, e selezionando quello corretto.  
\item[-] \textit{loadStyleSheet()} richiama \textit{activateStyleSheet} passandogli come parametro il nome del foglio di stile alternativo da utilizzare, dopo averlo ricavato dal nome e (in alcuni casi specifici) dalla versione del browser in uso; tale nome viene passato nella forma \textit{nome.css}.
\end{elencopuntato}

\subsezione{Visualization}
\subsubsezione{Tipo, obiettivo e funzione del componente}
Classe concreta che si occupa delle operazioni di visualizzazione del canvas su schermo, come la riscalatura a seguito di uno zoom e la corretta visualizzazione della parte ingrandita o rimpicciolita.
\subsubsezione{Relazioni d'uso di altre componenti}
Utilizza istanze di \textit{Scale} e \textit{BoundingRectangle}.
\subsubsezione{Interfacce e relazioni di uso da altre componenti}
\` E usato da \textit{Canvas}, per le operazioni descritte precedentemente.
\subsubsezione{Attivit\`a svolte e dati trattati}
\paragrafo{Attributi privati:}
\begin{elencopuntato}[\subsubsecindent]
\item[-] \textit{{\_}figureSet} insieme delle figure contenute in memoria.
\item[-] \textit{{\_}scale} di tipo \textit{Scale}, mantiene lo zoom corrente.
\item[-] \textit{{\_}offset} di tipo \textit{Point}, mantiene lo spostamento corrente della visualizzazione, misurato come differenza tra il punto (0, 0) e l'origine attuale.
\end{elencopuntato}
\paragrafo{Metodi pubblici:}
\begin{elencopuntato}[\subsubsecindent]
\item[-] \textit{refresh()} ridisegna il set di figure sul canvas, utilizzando il metodo\textit{draw} per ogni \textit{Figure};
\item[-] \textit{getFigureSet()} ritorna \textit{{\_}figureSet};
\item[-] \textit{deselectAll(figureSet)} deseleziona tutte le figure presenti nel figure set.
\item[-] \textit{getClickCoordsWithinTarget(event)} ritorna il punto esatto del canvas sul quale \`e avvenuto il click del mouse, differenziando le diverse interpretazioni che fa ciascun browser di tale evento per uniformarle in un unico metodo funzionante universalmente, e nella fattispecie utilizzando gli attributi clientX/Y, pageX/Y oppure layerX/Y di \textit{event}. 
Le coordinate vengono poi adattate allo spostamento corrente della visualizzazione sommandogli \textit{{\_}offset}, e allo zoom corrente, moltiplicandole per \textit{{\_}scale.getFactor()}.
\item[-] \textit{setCanvasDimension(canvasObj,height,width)} regola le dimensioni del canvas al caricamento della pagina in proporzione alla risoluzione del monitor dell'utente, che viene passata alla funzione tramite i due parametri \textit{height} e \textit{width}.
\item[-] \textit{eraseElement(figureSet,canvasObj)} cancella l'elemento attualmente selezionato sul canvas tramite la pressione del pulsante apposito oppure con il tasto "canc" della tastiera;
\item[-] \textit{cloneElement(actualFigure,canvasObj)} clona l'elemento attualmente selezionato tramite la pressione dell'apposito pulsante.
\end{elencopuntato}

\subsezione{Canvas}
\subsubsezione{Tipo, obiettivo e funzione del componente}
Classe che rappresenta il canvas, oggetto sul quale verrano visualizzate le figure disegnate, modificate e spostate dall'utente, tramite l'utilizzo del mouse. 
\subsubsezione{Relazioni d'uso di altre componenti}
Usa un'istanza di \textit{Visualization}, che si occupa della sua visualizzazione su schermo.
\subsubsezione{Interfacce e relazioni di uso da altre componenti}
Nessuna.
\subsubsezione{Attivit\`a svolte e dati trattati}
\paragrafo{Attributi privati:}
\begin{elencopuntato}[\subsubsecindent]
\item[-] \textit{{\_}height} l'altezza in pixel del canvas;
\item[-] \textit{{\_}width} la larghezza in pixel del canvas;
\item[-] \textit{{\_}id} il riferimento all'oggetto HTML <canvas>.
\end{elencopuntato}
\paragrafo{Metodi pubblici:}
\begin{elencopuntato}[\subsubsecindent]
\item[-] \textit{getId()} ritorna  \textit{{\_}id};
\item[-] \textit{clear()} cancella tutte le figure disegnate sul canvas, seguendo un criterio scritto nella bozza dello standard W3C, il quale prevede che la riassegnazione di uno degli attributi dimensionali del canvas comporta la cancellazione del suo contenuto e il ritorno allo stato iniziale con le nuove dimensioni;
\item[-] \textit{getHeight()} ritorna  \textit{{\_}height};
\item[-] \textit{getWidth()} ritorna  \textit{{\_}width};
\item[-] \textit{setHeight(val)} modifica \textit{{\_}height};
\item[-] \textit{setWidth(val)} modifica \textit{{\_}width}.
\end{elencopuntato}
\newpage


\begin{figure}[!ht]
\centering
\includegraphics[scale=0.5]{button.jpg}
\caption{Classi e loro relazioni - Bottoni}
\end{figure}

\begin{figure}[!ht]
\centering
\includegraphics[scale=0.5]{toolbar.jpg}
\caption{Classi e loro relazioni - Toolbar}
\end{figure}

\subsezione{Toolbar}
\subsubsezione{Tipo, obiettivo e funzione del componente}
Classe concreta che rappresenta la toolbar dalla quale l'utente pu\` o scegliere la funzione desiderata, posizionata in maniera da essere facilmente accessibile e sempre pronta all'uso.
\subsubsezione{Relazioni d'uso di altre componenti}
\` E formata da pi\`u istanze aggregate della classe \textit{Button}, per rappresentare ciascun tool selezionabile. 
\subsubsezione{Interfacce e relazioni di uso da altre componenti}
Nessuna.
\subsubsezione{Attivit\`a svolte e dati trattati}
\paragrafo{Attributi privati:}
\begin{elencopuntato}[\subsubsecindent]
\item[-] \textit{{\_}buttonList} la lista dei pulsanti presenti nella toolbar;
\end{elencopuntato}
\paragrafo{Metodi pubblici:}
\begin{elencopuntato}[\subsubsecindent]
\item[-]  \textit{add(b)} aggiunge il pulsante b alla fine di \textit{{\_}buttonList};
\item[-] \textit{deselectAll()} deseleziona tutte i pulsanti presenti nella toolbar;
\item[-] \textit{rebind(canvas,canvasObj,visual,figureSet,BorderColor,FillColor)} prende gli stessi parametri del metodo \textit{bindCanvas} per poi richiamarlo internamente, per aggiornare i colori, in caso di loro modifica, delle figure che verranno disegnate in futuro.
\end{elencopuntato}

\subsezione{Button}
\subsubsezione{Tipo, obiettivo e funzione del componente}
Classe astratta che rappresenta un generico pulsante tramite il quale effettuare l'operazione desiderata.
\subsubsezione{Relazioni d'uso di altre componenti}
Nessuna.
\subsubsezione{Interfacce e relazioni di uso da altre componenti}
Viene estesa da tutti i pulsanti creati.
\subsubsezione{Attivit\`a svolte e dati trattati}
\paragrafo{Attributi privati:}
\begin{elencopuntato}[\subsubsecindent]
\item[-] \textit{{\_}selected} dice se il pulsante \`e selezionato.
\end{elencopuntato}
\paragrafo{Metodi pubblici:}
\begin{elencopuntato}[\subsubsecindent]
\item[-]  \textit{setSelection(value)} permette di selezionare/deselezionare il pulsante. Modifica \textit{{\_}selected}.
\item[-]  \textit{isSelected()} dice se il pulsante \`e correntemente selezionato. Ritorna \textit{{\_}selected}.
\item[-]  \textit{bindCanvas(toolbar,canvas,canvasObj,visual,figureSet,BorderColor,FillColor)} collega l'azione del pulsante selezionato al canvas. Questo metodo viene utilizzato dalla figure fondamentali che non richiedono codice aggiuntivo particolare,come un rettangolo o una linea diritta, utilizzando il metodo \textit{getBuilder}, che permette il riconoscimento della figura da disegnare a seconda di quale funzione \` e al momento selezionata dall'utente, e di conseguenza imposta tutti gli attributi (colore di bordo e/o riempimento, numero di lati se necessario) per consentirne il disegno corretto. Utilizza inoltre del codice jQuery per gestire tutte le interazioni del mouse(click, movimento, uscita dal canvas). 
\item[-]  \textit{bindCursor(type)} collega ad ogni tool un cursore visibile sopra al canvas per capire che tipo di azione si sta compiendo.
\end{elencopuntato}

\subsezione{ClearCanvasButton}
\subsubsezione{Tipo, obiettivo e funzione del componente}
Classe concreta che rappresenta lo specifico pulsante che si occupa di svuotare totalmente il canvas, integrato nella sezione "Modifica" della barra in alto.
\subsubsezione{Relazioni d'uso di altre componenti}
Nessuna.
\subsubsezione{Interfacce e relazioni di uso da altre componenti}
Nessuna.
\subsubsezione{Attivit\`a svolte e dati trattati}
\leftskip=36pt Nessuna.


\subsezione{SaveButton}
\subsubsezione{Tipo, obiettivo e funzione del componente}
Classe concreta che rappresenta lo specifico pulsante che si occupa di salvare il set di figure attualemente disegnato sul canvas, integrato nella sezione "File" della barra in alto.
\subsubsezione{Relazioni d'uso di altre componenti}
Nessuna.
\subsubsezione{Interfacce e relazioni di uso da altre componenti}
Nessuna.
\subsubsezione{Attivit\`a svolte e dati trattati}
\leftskip=36pt Nessuna.

\subsezione{SelectionButton}
\subsubsezione{Tipo, obiettivo e funzione del componente}
Classe concreta che rappresenta lo specifico pulsante che attiva le funzionalit\` a di selezione.
\subsubsezione{Relazioni d'uso di altre componenti}
Estende \textit{Button}.
\subsubsezione{Interfacce e relazioni di uso da altre componenti}
\textit{Toolbar} ne mantiene un' istanza.
\subsubsezione{Attivit\`a svolte e dati trattati}
\paragrafo{Metodi pubblici:}
\begin{elencopuntato}[\subsubsecindent]
\item[-]  \textit{bindCanvas(toolbar,canvas,canvasObj,visual,figureSet)} overriding del metodo ereditato da \textit{Button}, collega il canvas all'azione di selezione di una figura disegnata sul canvas, e consente quindi di attivare le funzionalit\` a di spostamento della figura stessa, del suo ridimensionamento (tramite \{_}handleCtrlPoint), di clonazione ed eliminazione, tramite i metodi descritti in \textit{Visualization} e dell'impostazione del  livello di  profondit\`a, tramite gli appositi metodi \textit{toTop} e \textit{toBottom}  
\item[-] \textit{\{_}handleCtrlPoint} 
\end{elencopuntato}

\subsezione{ZoomButton}
\subsubsezione{Tipo, obiettivo e funzione del componente}
Classe astratta che rappresenta un pulsante che attiva le funzionalit\` a di zoom nel canvas.
\subsubsezione{Relazioni d'uso di altre componenti}
Estende \textit{Button}.
\subsubsezione{Interfacce e relazioni di uso da altre componenti}
Viene estasa da \textit{ZoomInButton} e \textit{ZoomOutButton}.
\subsubsezione{Attivit\`a svolte e dati trattati}
\leftskip=36pt Nessuna.

\subsezione{ZoomInButton}
\subsubsezione{Tipo, obiettivo e funzione del componente}
Classe concreta che rappresenta pulsante che attiva le funzionalit\` a di ingrandimento dell'area di visualizzazione del canvas.
\subsubsezione{Relazioni d'uso di altre componenti}
Estende \textit{ZoomButton}.
\subsubsezione{Interfacce e relazioni di uso da altre componenti}
\textit{Toolbar} ne mantiene un' istanza.
\subsubsezione{Attivit\`a svolte e dati trattati}
\paragrafo{Metodi pubblici:}
\begin{elencopuntato}[\subsubsecindent]
\item[-] \textit{bindCanvas(toolbar,canvas,canvasObj,visual,figureSet)} collega il canvas all'azione di ingrandimento dell'area visualizzata. Collega l'evento click per prendere il punto che diventer\`a la nuova origine delle coordinate, e setta lo zoom di \textit{visual} in base al valore corrente di \textit{scaleButton}.
\end{elencopuntato}

\subsezione{ZoomOutButton}
\subsubsezione{Tipo, obiettivo e funzione del componente}
Classe concreta che rappresenta pulsante che attiva le funzionalit\` a di rimpicciolimento dell'area di visualizzazione del canvas.
\subsubsezione{Relazioni d'uso di altre componenti}
Estende \textit{ZoomButton}.
\subsubsezione{Interfacce e relazioni di uso da altre componenti}
\textit{Toolbar} ne mantiene un' istanza.
\subsubsezione{Attivit\`a svolte e dati trattati}
\paragrafo{Metodi pubblici:}
\begin{elencopuntato}[\subsubsecindent]
\item[-] \textit{bindCanvas(toolbar,canvas,canvasObj,visual,figureSet)} collega il canvas all'azione di rimpicciolimento della'area visualizzata. Collega l'evento click per prendere il punto che diventer\`a la nuova origine delle coordinate, e setta lo zoom di \textit{visual} in base al valore corrente di \textit{scaleButton}.
\end{elencopuntato}

\subsezione{Scale}
\subsubsezione{Tipo, obiettivo e funzione del componente}
Classe concreta che si occupa delle operazioni di riscalamento del \underline{canvas} su schermo. 
\subsubsezione{Relazioni d'uso di altre componenti}
Usa il contesto grafico per applicare lo spostamento e il riscalamento della parte di canvas visualizzata.
\subsubsezione{Interfacce e relazioni di uso da altre componenti}
\textit{Visualization} ne utilizza un'istanza.
\subsubsezione{Attivit\`a svolte e dati trattati}
\paragrafo{Attributi privati:}
\begin{elencopuntato}[\subsubsecindent]
\item[-] \textit{{\_}factor} fattore di riscalamento. Il valore 1.0 equivale ad un riscalamento 1:1. Viene impostato al valore passato al costruttore.
\end{elencopuntato}
\paragrafo{Metodi pubblici:}
\begin{elencopuntato}[\subsubsecindent]
\item[-] \textit{getFactor()} ritorna \textit{{\_}factor};
\item[-] \textit{applyToContext(context, offset)} applica il riscalamento al contesto passato usandone il metodo \textit{scale}, e pone l'origine nel punto specificato da \textit{offset} usando il metodo \textit{translate} del contesto grafico.
\item[-] \textit{scalePoint(point, offset)} applica le stesse operazioni di \textit{applyToContext} su un singolo punto (non sul contesto). Ritorna un nuovo punto.
\item[-] \textit{toAbs(point, offset)} prende un punto e rovescia le operazioni di \textit{applyToContext} su quel singolo punto (non sul contesto). Ritorna un nuovo punto.
\end{elencopuntato}

\subsezione{MoveViewButton}
\subsubsezione{Tipo, obiettivo e funzione del componente}
Classe concreta che rappresenta lo specifico pulsante che attiva le funzionalit\` a di spostamento della visualizzazione nel canvas.
\subsubsezione{Relazioni d'uso di altre componenti}
Estende \textit{Button}.
\subsubsezione{Interfacce e relazioni di uso da altre componenti}
\textit{Toolbar} ne mantiene un' istanza.
\subsubsezione{Attivit\`a svolte e dati trattati}
\paragrafo{Metodi pubblici:}
\begin{elencopuntato}[\subsubsecindent]
\item[-] \textit{bindCanvas(toolbar,canvas,canvasObj,visual)} collega il canvas all'azione di spostamento. Collega l'evento mousedown per prendere il punto di riferimento per lo spostamento. L'evento mousemove sposter\`a la visualizzazione cambiandone l'offset in base allo spostamento relativo tra il punto di riferimento e la posizione attuale del mouse e far\`a un refresh del canvas. L'evento mouseup infine termina l'azione disabilitando l'evento mousemove.
\end{elencopuntato}

\subsezione{StraightLineButton}
\subsubsezione{Tipo, obiettivo e funzione del componente}
Classe concreta che rappresenta lo specifico pulsante che attiva le funzionalit\` a di disegno di una linea diritta.
\subsubsezione{Relazioni d'uso di altre componenti}
Estende \textit{Button}.
\subsubsezione{Interfacce e relazioni di uso da altre componenti}
\textit{Toolbar} ne mantiene un' istanza.
\subsubsezione{Attivit\`a svolte e dati trattati}
\paragrafo{Metodi pubblici:}
\begin{elencopuntato}[\subsubsecindent]
\item[-] \textit{getBuilder()} ritorna il tipo di oggetto disegnato tramite la pressione di questo pulsante, per permetterne il riconoscimento al metodo \textit{bindCanvas} in modo da associare correttamente la figura da disegnare al suo pulsante.
\end{elencopuntato}

\subsezione{BezierCurveButton}
\subsubsezione{Tipo, obiettivo e funzione del componente}
Classe concreta che rappresenta lo specifico pulsante che attiva le funzionalit\` a di disegno di una curva di Bezier.
\subsubsezione{Relazioni d'uso di altre componenti}
Estende \textit{Button}.
\subsubsezione{Interfacce e relazioni di uso da altre componenti}
\textit{Toolbar} ne mantiene un' istanza.
\subsubsezione{Attivit\`a svolte e dati trattati}
\paragrafo{Metodi pubblici:}
\begin{elencopuntato}[\subsubsecindent]
\item[-] \textit{getBuilder()} ritorna il tipo di oggetto disegnato tramite la pressione di questo pulsante, per permetterne il riconoscimento al metodo \textit{bindCanvas} in modo da associare correttamente la figura da disegnare al suo pulsante.
\item[-]  \textit{bindCanvas(toolbar,canvas,canvasObj,visual,figureSet,borderColor)} overriding del metodo ereditato da \textit{Button}, collega il canvas all'azione di disegno di una curva di Bezier cubica,  chiedendo all'utente di cliccare su 4 punti diversi dell'area di disegno per ottenere infine la curva voluta.
\end{elencopuntato}

\subsezione{SquareButton}
\subsubsezione{Tipo, obiettivo e funzione del componente}
Classe concreta che rappresenta lo specifico pulsante che attiva le funzionalit\` a di disegno di una figura quadrata o rettangolare.
\subsubsezione{Relazioni d'uso di altre componenti}
Estende \textit{Button}.
\subsubsezione{Interfacce e relazioni di uso da altre componenti}
\textit{Toolbar} ne mantiene un' istanza.
\subsubsezione{Attivit\`a svolte e dati trattati}
\paragrafo{Metodi pubblici:}
\begin{elencopuntato}[\subsubsecindent]
\item[-] \textit{getBuilder()} ritorna il tipo di oggetto disegnato tramite la pressione di questo pulsante, per permetterne il riconoscimento al metodo \textit{bindCanvas} in modo da associare correttamente la figura da disegnare al suo pulsante.
\end{elencopuntato}

\subsezione{CircleButton}
\subsubsezione{Tipo, obiettivo e funzione del componente}
Classe concreta che rappresenta lo specifico pulsante che attiva le funzionalit\` a di disegno di una figura rotonda o elissoidale.
\subsubsezione{Relazioni d'uso di altre componenti}
Estende \textit{Button}.
\subsubsezione{Interfacce e relazioni di uso da altre componenti}
\textit{Toolbar} ne mantiene un' istanza.
\subsubsezione{Attivit\`a svolte e dati trattati}
\paragrafo{Metodi pubblici:}
\begin{elencopuntato}[\subsubsecindent]
\item[-] \textit{getBuilder()} ritorna il tipo di oggetto disegnato tramite la pressione di questo pulsante, per permetterne il riconoscimento al metodo \textit{bindCanvas} in modo da associare correttamente la figura da disegnare al suo pulsante.
\end{elencopuntato}

\subsezione{PolygonButton}
\subsubsezione{Tipo, obiettivo e funzione del componente}
Classe concreta che rappresenta lo specifico pulsante che attiva le funzionalit\` a di disegno di un poligono con un numero di lati arbitrario.
\subsubsezione{Relazioni d'uso di altre componenti}
Estende \textit{Button}.
\subsubsezione{Interfacce e relazioni di uso da altre componenti}
\textit{Toolbar} ne mantiene un' istanza.
\subsubsezione{Attivit\`a svolte e dati trattati}
\paragrafo{Metodi pubblici:}
\begin{elencopuntato}[\subsubsecindent]
\item[-] \textit{getBuilder()} ritorna il tipo di oggetto disegnato tramite la pressione di questo pulsante, per permetterne il riconoscimento al metodo \textit{bindCanvas} in modo da associare correttamente la figura da disegnare al suo pulsante.
\end{elencopuntato}

\subsezione{FreeLineButton}
\subsubsezione{Tipo, obiettivo e funzione del componente}
Classe concreta che rappresenta lo specifico pulsante che attiva le funzionalit\` a di disegno di una linea a mano libera.
\subsubsezione{Relazioni d'uso di altre componenti}
Estende \textit{Button}.
\subsubsezione{Interfacce e relazioni di uso da altre componenti}
\textit{Toolbar} ne mantiene un' istanza.
\subsubsezione{Attivit\`a svolte e dati trattati}
\paragrafo{Metodi pubblici:}
\begin{elencopuntato}[\subsubsecindent]
\item[-] \textit{getBuilder()} ritorna il tipo di oggetto disegnato tramite la pressione di questo pulsante, per permetterne il riconoscimento al metodo \textit{bindCanvas} in modo da associare correttamente la figura da disegnare al suo pulsante.
\item[-]  \textit{bindCanvas(toolbar,canvas,canvasObj,visual,figureSet,borderColor)} overriding del metodo ereditato da \textit{Button}, collega il canvas all'azione di disegno di una linea a mano libera.
\end{elencopuntato}


\subsezione{TextButton}
\subsubsezione{Tipo, obiettivo e funzione del componente}
Classe concreta che rappresenta lo specifico pulsante che attiva le funzionalit\` a di disegno di una linea a mano libera.
\subsubsezione{Relazioni d'uso di altre componenti}
Estende \textit{Button}.
\subsubsezione{Interfacce e relazioni di uso da altre componenti}
\textit{Toolbar} ne mantiene un' istanza.
\subsubsezione{Attivit\`a svolte e dati trattati}
\paragrafo{Metodi pubblici:}
\begin{elencopuntato}[\subsubsecindent]
\item[-] \textit{getBuilder()} ritorna il tipo di oggetto disegnato tramite la pressione di questo pulsante, per permetterne il riconoscimento al metodo \textit{bindCanvas} in modo da associare correttamente la figura da disegnare al suo pulsante.
\item[-]  \textit{bindCanvas(toolbar,canvas,canvasObj,visual,figureSet,borderColour,fillColor)} overriding del metodo ereditato da \textit{Button}, collega il canvas all'azione di disegno di una casella di testo. 
\end{elencopuntato}
\newpage
\begin{figure}[!ht]
\centering
\includegraphics[scale=0.7]{dialogs.jpg}
\caption{Classi e loro relazioni - Dialogs e Tavolozza}
\end{figure}

\subsezione{Palette}
\subsubsezione{Tipo, obiettivo e funzione del componente}
Classe concreta che rappresenta la tavolozza dei colori presente al di sotto del canvas, dalla quale \` e possibile selezionare rapidamente un colore per bordo e/o riempimento.
\subsubsezione{Relazioni d'uso di altre componenti}
Nessuna.
\subsubsezione{Interfacce e relazioni di uso da altre componenti}
Nessuna.
\subsubsezione{Attivit\`a svolte e dati trattati}
\paragrafo{Metodi pubblici:}
\begin{elencopuntato}[\subsubsecindent]
\item[-]  \textit{setColour(col,prec1,prec2)} cambia il colore di bordo o riempimento della figura al seguito di un click dell'utente sullla tavolozza, prendendo il colore attualmente impostato e modificando uno dei due parametri a seconda del valore selezionato sul combobox a fianco. Ritorna la nuova coppia di colori bordo-riempimento.
\item[-]  \textit{rgbToHex(rgb)} prende il valore rgb passato dalla ruota dei colori \textit{Farbtastic} e ritorna la sua rappresentazione esadecimale.
\end{elencopuntato}

\subsezione{ColourDialog}
\subsubsezione{Tipo, obiettivo e funzione del componente}
Classe concreta che rappresenta il dialog sul quale sono presenti le ruote per cambiare i colori di riempimento e bordo della figura disegnata o da disegnare.
\subsubsezione{Relazioni d'uso di altre componenti}
Nessuna.
\subsubsezione{Interfacce e relazioni di uso da altre componenti}
Nessuna.
\subsubsezione{Attivit\`a svolte e dati trattati}
\paragrafo{Metodi pubblici:}
\begin{elencopuntato}[\subsubsecindent]
\item[-] \textit{create()} richiama la funzione jQuery atta alla creazione del Dialog.
\end{elencopuntato}

\subsezione{PropertiesDialog}
\subsubsezione{Tipo, obiettivo e funzione del componente}
Classe concreta che rappresenta il dialog sul quale sono presenti le caratteristiche della figura disegnata o da disegnare, quali dimensioni, numeri di lati, coordinate.
\subsubsezione{Relazioni d'uso di altre componenti}
Nessuna.
\subsubsezione{Interfacce e relazioni di uso da altre componenti}
Nessuna.
\subsubsezione{Attivit\`a svolte e dati trattati}
\paragrafo{Metodi pubblici:}
\begin{elencopuntato}[\subsubsecindent]
\item[-] \textit{create()} richiama la funzione jQuery atta alla creazione del Dialog.
\end{elencopuntato}

\subsezione{BoundingRectangleSetter}
\subsubsezione{Tipo, obiettivo e funzione del componente}
Classe concreta che rappresenta l'oggetto che si occupa di impostare e modificare le coordinate del rettangolo contenente la figura disegnata sul canvas.
\subsubsezione{Relazioni d'uso di altre componenti}
Legge e modifica \textit{BoundingRectagle}.
\subsubsezione{Interfacce e relazioni di uso da altre componenti}
\textit{PropertiesDialog} ne mantiene un'istanza.
\subsubsezione{Attivit\`a svolte e dati trattati}
\paragrafo{Metodi pubblici:}
\begin{elencopuntato}[\subsubsecindent]
\item[-] \textit{BoundingRectagleSetter(bounds)} costruttore. Prende un \textit{BoundingRectagle} e setta il valore dei campi di un dialog statico implementato in HTML. I campi contengono: i valori x ed y dell'inizio di \textit{bounds} e i valori di altezza e larghezza. Collega un evento al pulsante di conferma del dialog, e se l'utente ha modificato i valori, e i valori inseriti sono dei numeri, modifica le corrispondenti propriet\`a di \textit{bounds} ed esegue un refresh.
\end{elencopuntato}

\subsezione{EdgeNumberSetter}
\subsubsezione{Tipo, obiettivo e funzione del componente}
Classe concreta che rappresenta l'oggetto che si occupa di modificare il numero di lati della figura da disegnare o selezionata.
\subsubsezione{Relazioni d'uso di altre componenti}
Legge e modifica \textit{EdgeNumber}.
\subsubsezione{Interfacce e relazioni di uso da altre componenti}
\textit{PropertiesDialog} ne mantiene un'istanza.
\subsubsezione{Attivit\`a svolte e dati trattati}
\paragrafo{Metodi pubblici:}
\begin{elencopuntato}[\subsubsecindent]
\item[-] \textit{EdgeNumberSetter(en)} costruttore. Prende un \textit{EdgeNumber} e setta il valore di un campo di un dialog statico implementato in HTML. Il campo contiene il valore attuale di \textit{en}. Collega un evento al pulsante di conferma del dialog, e se l'utente ha modificato il valore, e il valore inserito e' un intero maggiore o uguale a 2, modifica \textit{en} ed esegue un refresh.
\end{elencopuntato}

\subsezione{RotationSetter}
\subsubsezione{Tipo, obiettivo e funzione del componente}
Classe concreta che si occupa di impostare un angolo di rotazione e modificare le coordinate di una figura disegnata sul canvas ruotando la figura selezionata.
\subsubsezione{Relazioni d'uso di altre componenti}
Legge e modifica \textit{Rotation}.
\subsubsezione{Interfacce e relazioni di uso da altre componenti}
\textit{PropertiesDialog} ne mantiene un'istanza.
\subsubsezione{Attivit\`a svolte e dati trattati}
\paragrafo{Metodi pubblici:}
\begin{elencopuntato}[\subsubsecindent]
\item[-] \textit{RotationSetter(angle)} costruttore. Prende un \textit{Rotation} e setta il valore di un campo di un dialog statico implementato in HTML. Il campo contiene il valore attuale di \textit{angle}. Un evento viene collegato al pulsante di conferma \textit{Ruota} e se l'utente ha modificato l'angolo di rotazione, modifica \textit{angle} ed esegue un refresh. 
\end{elencopuntato}

\subsezione{FontSetter}
\subsubsezione{Tipo, obiettivo e funzione del componente}
Classe concreta che rappresenta l'oggetto che si occupa di modificare il tipo di carattere della casella di testo da disegnare o selezionata.
\subsubsezione{Relazioni d'uso di altre componenti}
Legge e modifica \textit{TextFont}.
\subsubsezione{Interfacce e relazioni di uso da altre componenti}
\textit{PropertiesDialog} ne mantiene un'istanza.
\subsubsezione{Attivit\`a svolte e dati trattati}
\paragrafo{Metodi pubblici:}
\begin{elencopuntato}[\subsubsecindent]
\item[-] \textit{FontSetter(font)} costruttore. Prende un \textit{TextFont} e setta il valore di un campo a scelta multipla di un dialog statico implementato in HTML. Il campo contiene il tipo di carattere attuale di \textit{font}. Collega un evento al pulsante di conferma del dialog, e se l'utente ha modificato il tipo di carattere, modifica \textit{font} ed esegue un refresh.
\end{elencopuntato}

\subsezione{TextStringSetter}
\subsubsezione{Tipo, obiettivo e funzione del componente}
Classe concreta che rappresenta l'oggetto che si occupa di modificare la stringa della casella di testo da disegnare o selezionata.
\subsubsezione{Relazioni d'uso di altre componenti}
Legge e modifica \textit{TextString}.
\subsubsezione{Interfacce e relazioni di uso da altre componenti}
\textit{PropertiesDialog} ne mantiene un'istanza.
\subsubsezione{Attivit\`a svolte e dati trattati}
\paragrafo{Metodi pubblici:}
\begin{elencopuntato}[\subsubsecindent]
\item[-] \textit{TextStringSetter(text)} costruttore. Prende un \textit{TextString} e setta il valore di un campo di un dialog statico implementato in HTML. Il campo contiene la stringa attuale di \textit{text}. Collega un evento al pulsante di conferma del dialog, e se l'utente ha modificato la stringa, modifica \textit{txt} ed esegue un refresh.
\end{elencopuntato}


%%%%%%%%Parte Dissegna
\sezione{Specifica delle componenti - ApplicationLogic, gestione figure}
Gestisce completamente le figure: il disegno, la conversione da e verso \underline{SVG}, le loro propriet\`a, la loro manipolazione e creazione. Utilizza le interfacce messe a disposizione dallo strato server e offre le proprie funzionalit\`a allo strato GUI. Nel grafico in figura 5 si riportano le classi per la gestione delle figure con le loro relazioni. Nel diagramma non si mostrano attributi e metodi in quanto ampiamente descritti testualmente in seguito.

\begin{figure}[!ht]
\centering
\includegraphics[scale=0.5]{applogic_figures.png}
\caption{Classi e loro relazioni - gestione figure}
\end{figure}

\subsezione{Figure}
\subsubsezione{Tipo, obiettivo e funzione del componente}
Classe astratta che rappresenta una figura generica nel sistema, ovvero un oggetto disegnabile nel canvas.
\subsubsezione{Relazioni d'uso di altre componenti}
Mantiene un'istanza della classe \textit{BoundingRectangle} per rappresentare i limiti della figura. Contiene anche un'istanza di \textit{Colour} che rappresenta il colore del bordo. Deriva, ma non implementa, l'interfaccia \textit{SVGReadable} e l'interfaccia \textit{SVGWritable}, in quanto le sue sottoclassi dovranno essere serializzabili e deserializabili in file SVG.
\subsubsezione{Interfacce e relazioni di uso da altre componenti}
Viene aggregata dalla classe \textit{FigureSet}.
\subsubsezione{Attivit\`a svolte e dati trattati}
\paragrafo{Attributi privati:}
\begin{elencopuntato}[\subsubsecindent]
\item[-] \textit{{\_}selected} valore booleano, dice se la figura \`e selezionata
\item[-] \textit{{\_}bounds} \textit{BoundingRectangle} che racchiude la figura
\item[-] \textit{{\_}borderColour} colore del bordo della figura, di tipo \textit{Colour}
\end{elencopuntato}
\paragrafo{Metodi pubblici:}
\begin{elencopuntato}[\subsubsecindent]
\item[-] \textit{getBounds()} ritorna \textit{{\_}bounds}
\item[-] \textit{getBorderColour()} ritorna \textit{{\_}borderColour}
\item[-]  \textit{draw(canvas)} metodo astratto per disegnare la figura sul canvas.
\item[-]  \textit{getMainPoints} ottiene i punti della figura manipolabili dall'utente. Ritorna un array contenente copie del punto di inizio e del punto di fine del \textit{BoundingRectangle} ottenuti con i metodi \textit{start()} e \textit{end()}.
\item[-]  \textit{setSelection(value)} permette di selezionare/deselezionare la figura. Setta \textit{{\_}selected} a \textit{value}.
\item[-]  \textit{isSelected()} dice se la figura \`e correntemente selezionata. Ritorna \textit{{\_}selected}.
\item[-]  \textit{eachProperty(fn)} applica la funzione fn ad ogni propriet\`a della figura, ovvero a \textit{{\_}bounds} e \textit{{\_}borderColour}.
\item[-] \textit{drawSelection(canvas)} disegna dei quadratini di colore blu e con opacit\`a 0.8 intorno ai punti principali della figura, ottenuti tramite \textit{getMainPoints} e traccia i bordi del \textit{BoundingRectangle} di colore grigio con opacit\`a 0.8, solo se la figura \`e selezionata. Sia per disegnare i quadrati, si per disegnare i bordi, utilizza il metodo \textit{strokeRect} del contesto grafico.
\item[-] \textit{clone()} esegue una copia profonda di se stesso utilizzando il metodo \textit{jQuery.extend()}. Sposta il \textit{BoundingRectangle} della copia di 10px verso l'alto sottraendo questo valore alle componenti y dei punti di inizio e di fine, e ritorna la copia.
\end{elencopuntato}

\subsezione{FigureSet}
\subsubsezione{Tipo, obiettivo e funzione del componente}
Rappresenta una collezione di figure. Tutte le figure disegnate dall'utente sono contenute in questa collezione, la quale ne permette la manipolazione e l'attraversamento. Per cancellare una figura \`e sufficiente rimuoverla dalla collezione.
\subsubsezione{Relazioni d'uso di altre componenti}
Contiene le istanze di \textit{Figure} correntemente attive.
\subsubsezione{Interfacce e relazioni di uso da altre componenti}
Usata dalla classe \textit{SVGWriter} per serializzare in SVG le figure correnti a dall'interfaccia utente per accedere alle figure. Pu\`o venire generata dalla classe \textit{SVGReader} dopo la deserializzazione di un file SVG.
\subsubsezione{Attivit\`a svolte e dati trattati}
Il costruttore controlla se il browser supporta il metodo \textit{getImageData} del contesto grafico. In caso negativo, setta il metodo \textit{selectFigure} a \textit{fallbackSelection}.
\paragrafo{Attributi privati:}
\begin{elencopuntato}[\subsubsecindent]
\item[-] \textit{{\_}figures} array contenente le figure.
\end{elencopuntato}
\paragrafo{Metodi pubblici:}
\begin{elencopuntato}[\subsubsecindent]
\item[-]  \textit{selectFigure(where)} permette di selezionare una figura contenente il punto passato come argomento, se tale figura esiste. Come si vede nel diagramma di attivit\`a in figura 1, si crea un canvas non visibile all'utente sul quale verranno disegnate tutte le figure. Ogni figura viene disegnata usando un solo colore, ed ognuna ha un colore diverso da tutte le altre figure. Durante questo processo, si costruisce una tabella di hash che associa il colore alla figura. Finito di disegnare, si usa il metodo \textit{getImageData} del contesto grafico per ottenere il colore del pixel nel punto selezionato. Questo colore viene usato come indice nella tabella di hash per ottenere la figura selezionata. Se il colore non \`e presente nella tabella, allora nessuna figura \`e stata selezionata.

\begin{figure}[!ht]
\centering
\includegraphics[scale=0.5]{defaultselection.png}
\caption{Diagramma di attivit\`a selezione figura}
\end{figure}

\item[-] \textit{fallbackSelection(where)} metodo usato quando il browser non supporta \textit{getImageData} al posto di \textit{selectFigure}. Seleziona l'ultima figura (se esiste) il cui \textit{BoundingRectangle} contiene il punto \textit{where}. Per farlo itera lungo l'array \textit{{\_}figures} a partire dalla fine, e quando trova un rettangolo che racchiude il punto si ferma e ritorna la figura corrispondente. Questo metodo \`e pi\`u impreciso rispetto a \textit{selectFigure}.
\item[-]  \textit{each(fn)} permette di applicare una funzione ad ogni figura. Viene usato per iterare attraverso la collezione. Applica fn ad ogni elemento di \textit{{\_}figures}. 
\item[-]  \textit{add(f)} aggiunge la figura f alla fine di \textit{{\_}figures} usando il metodo \textit{push()} dell'array.
\item[-]  \textit{rem(f)} rimuove da \textit{{\_}figures} tutte le figure identiche (ovvero aventi lo stesso indirizzo) di f. Crea un array vuoto, itera lungo \textit{{\_}figures}, e aggiunge al nuovo array la figura solo se \`e diversa da \textit{f}. Setta \textit{{\_}figures} al nuovo array.
\item[-] \textit{toTop(f)} prende la figura f e l'aggiunge in cima a tutte le altre ponendola come ultima nell'array \textit{{\_}figures}. Se \`e gi\`a presente, la sposta. Usa il metodo \textit{rem} per togliere la figura e il metodo \textit{add} per aggiungerla in coda.
\item[-] \textit{toBottom(f)} prende la figura f e l'aggiunge sotto tutte le altre ponendola come prima nell'array \textit{{\_}figures}. Se \`e gi\`a presente, la sposta. Usa il metodo \textit{rem} per togliere la figura e il metodo \textit{unshift} di \textit{{\_}figures} per aggiungerla in testa.
\end{elencopuntato}


\subsezione{Property}
\subsubsezione{Tipo, obiettivo e funzione del componente}
Rappresenta una propriet\`a generica di una figura. Le propriet\`a influenzano 
l'aspetto delle diverse figure, e sono modificabili dall'utente. Non viene implementata in quanto \`e un'interfaccia.
\subsubsezione{Relazioni d'uso di altre componenti}
Nessuna.
\subsubsezione{Interfacce e relazioni di uso da altre componenti}
Implementata da tutte le propriet\`a concrete delle diverse figure.
\subsubsezione{Attivit\`a svolte e dati trattati}
\paragrafo{Metodi pubblici:}
\begin{elencopuntato}[\subsubsecindent]
\item[-] \textit{createWidget} crea un widget grafico che permetter\`a all'utente di modificare la propriet\`a.
\end{elencopuntato}

\subsezione{CSSProperty}
\subsubsezione{Tipo, obiettivo e funzione del componente}
Rappresenta una propriet\`a di una figura che necessita di una rappresentazione conforme ai CSS. Questa rappresentazione \`e necessaria per applicare alcune propriet\`a (come ad esempio il colore) al canvas e per la conversione in SVG. Non \`e presente in modo esplicito nel codice.
\subsubsezione{Relazioni d'uso di altre componenti}
Nessuna.
\subsubsezione{Interfacce e relazioni di uso da altre componenti}
Implementata da \textit{Colour} e \textit{TextFont}. 
\subsubsezione{Attivit\`a svolte e dati trattati}
\paragrafo{Metodi pubblici:}
\begin{elencopuntato}[\subsubsecindent]
\item[-] \textit{toCSS} genera una stringa che rappresenta la propriet\`a come propriet\`a CSS.
\end{elencopuntato}

\subsezione{Opacity}
\subsubsezione{Tipo, obiettivo e funzione del componente}
Rappresenta l'opacit\`a di un colore. Mantiene un unico valore che varia nell'intervallo [0, 1]. Se il valore \`e 0 la figura \`e completamente trasparente, se
il valore \`e 1, la figura \`e completamente opaca, ovvero non permette la visualizzazione delle figure sottostanti.
\subsubsezione{Relazioni d'uso di altre componenti}
Nessuna.
\subsubsezione{Interfacce e relazioni di uso da altre componenti}
\textit{Colour} ne mantiene un'istanza.
\subsubsezione{Attivit\`a svolte e dati trattati}
\paragrafo{Attributi privati:}
\begin{elencopuntato}[\subsubsecindent]
\item[-] \textit{\_val} un numero contenente il valore dell'opacit\`a.
\end{elencopuntato}
\paragraph{Metodi pubblici:}
\begin{elencopuntato}[\subsubsecindent]
\item[-] \textit{get/setVal} permette di ottenere, o di modificare, il valore dell'opacit\`a.
\item[-] \textit{applyToContext(context)} setta il valore \textit{globalAlpha} del contesto grafico al proprio valore interno. Questo valore influenzer\`a l'opacit\`a delle prossime figure disegnate.
\end{elencopuntato}

\subsezione{EdgeNumber}
\subsubsezione{Tipo, obiettivo e funzione del componente}
Rappresenta il numero degli spigoli di un poligono. Questo numero non pu\`o essere inferiore a 3.
\subsubsezione{Relazioni d'uso di altre componenti}
Implementa \textit{Property}.
\subsubsezione{Interfacce e relazioni di uso da altre componenti}
\textit{Polygon} ne mantiene un'istanza.
\subsubsezione{Attivit\`a svolte e dati trattati}
\paragrafo{Attributi privati:}
\begin{elencopuntato}[\subsubsecindent]
\item[-] \textit{\_val} un intero che indica il numero di lati.
\end{elencopuntato}
\paragraph{Metodi pubblici:}
\begin{elencopuntato}[\subsubsecindent]
\item[-] \textit{get/setVal} permette di ottenere, o di modificare, il numero di lati.
\item[-] \textit{createWidget} crea e ritorna un'istanza di \textit{EdgeNumberSetter} passando se stesso come parametro al costruttore.
\end{elencopuntato}

\subsezione{Rotation}
\subsubsezione{Tipo, obiettivo e funzione del componente}
Rappresenta la propriet\`a di una figura di essere ruotata.
\subsubsezione{Relazioni d'uso di altre componenti}
Implementa \textit{Property}.
\subsubsezione{Interfacce e relazioni di uso da altre componenti}
\textit{Figure} ne mantiene un'istanza.
\subsubsezione{Attivit\`a svolte e dati trattati}
\paragrafo{Attributi privati:}
\begin{elencopuntato}[\subsubsecindent]
\item[-] \textit{\_rad} un numero contenente il valore dell'angolo espresso in radianti.
\end{elencopuntato}
\paragraph{Metodi pubblici:}
\begin{elencopuntato}[\subsubsecindent]
\item[-] \textit{get/setAngle} permette di ottenere, o di modificare l'angolo di rotazione.
\item[-] \textit{applyToContext(context)} invoca il metodo \textit{rotate(angle)} del contesto grafico alla propria rappresentazione e richiama il metodo \textit{applyToContext} su \textit{{\_}rad} passando \textit{context} come argomento.
\item[-] \textit{createWidget} crea e ritorna un'istanza di \textit{RotationSetter} passando se stesso come parametro al costruttore.
\end{elencopuntato}

\subsezione{Colour}
\subsubsezione{Tipo, obiettivo e funzione del componente}
Rappresenta un colore come una terna RGB pi\`u l'opacit\`a del colore stesso. Questa rappresentazione trova una corrispondenza diretta sia nel tag <canvas>, sia nel formato SVG.
\subsubsezione{Relazioni d'uso di altre componenti}
Implementa \textit{Property} e \textit{CSSProperty}. Mantiene un'istanza di \textit{Opacity} che rappresenta l'opacit\`a del colore.
\subsubsezione{Interfacce e relazioni di uso da altre componenti}
\textit{Figure} ne mantiene un'istanza per rappresentare il colore del bordo.
\subsubsezione{Attivit\`a svolte e dati trattati}
\paragrafo{Attributi privati:}
\begin{elencopuntato}[\subsubsecindent]
\item[-] \textit{\_r} intensit\`a del rosso. Pu\`o valere da 0 a 255.
\item[-] \textit{\_g} intensit\`a del verde. Pu\`o valere da 0 a 255.
\item[-] \textit{\_b} intensit\`a del blu. Pu\`o valere da 0 a 255.
\item[-] \textit{\_o} opacit\`a del colore, di tipo \textit{Opacity}.
\end{elencopuntato}
\paragraph{Metodi pubblici:}
\begin{elencopuntato}[\subsubsecindent]
\item[-] \textit{getOpacity()} ritorna l'attributo \textit{{\_}o}.
\item[-] \textit{set(r, g, b, o)} modifica i valori dei quattro attributi.
\item[-] \textit{fromCSS(repr)} inizializza le componenti RGB del colore a partire dalla loro rappresentazione CSS. Divide la stringa \textit{repr} in tre parti di due cifre esadecimali l'una usando un'espressione regolare, le converte in numeri usando la funzione \textit{readInt} e le assegna alle tre componenti. Se \textit{repr} \`e invalida, ovvero una delle chiamata a \textit{readInt} ritorna \textit{NaN}, viene sollevata un'eccezione.
\item[-] \textit{createWidget()} crea e ritorna un'istanza di \textit{ColourDialog} passando se stesso come parametro al costruttore.
\item[-] \textit{toCSS()} ritorna il colore come una stringa di tipo {\#}EEEEEE formata da tre coppie di due cifre esadecimali l'una. Le coppie rappresentano rispettivamente il rosso, il verde, il blu. Per la conversione da intero a stringa esadecimale si usa il metodo \textit{toString} della classe \textit{Number}. L'opacit\`a viene ignorata da questo metodo.
\item[-] \textit{applyToContext(context)} setta l'attributo \textit{strokeStyle} del contesto grafico alla propria rappresentazione CSS, e richiama il metodo \textit{applyToContext} su \textit{{\_}o} passando \textit{context} come argomento.
\end{elencopuntato}

\subsezione{FillColour}
\subsubsezione{Tipo, obiettivo e funzione del componente}
Rappresenta un colore di riempimento.
\subsubsezione{Relazioni d'uso di altre componenti}
Deriva da \textit{Colour}.
\subsubsezione{Interfacce e relazioni di uso da altre componenti}
\textit{Circle}, \textit{Polygon} e \textit{Rectangle} ne mantengono un'istanza.
\subsubsezione{Attivit\`a svolte e dati trattati}
\paragraph{Metodi pubblici:}
\begin{elencopuntato}[\subsubsecindent]
\item[-] \textit{applyToContext(context)} setta l'attributo \textit{fillStyle} del contesto grafico alla propria rappresentazione CSS, e richiama il metodo \textit{applyToContext} su \textit{{\_}o} passando \textit{context} come argomento.
\end{elencopuntato}

\subsezione{TextProperty}
\subsubsezione{Tipo, obiettivo e funzione del componente}
Propriet\`a di un testo grafico. Non serve implementarla in \underline{JavaScript}, in quanto \`e un'interfaccia.

\subsezione{TextColour}
\subsubsezione{Tipo, obiettivo e funzione del componente}
Rappresenta il colore di un testo.
\subsubsezione{Relazioni d'uso di altre componenti}
Deriva da \textit{FillColour}.
\subsubsezione{Interfacce e relazioni di uso da altre componenti}
\textit{Text} ne mantiene un'istanza.
\subsubsezione{Attivit\`a svolte e dati trattati}
\leftskip=36pt{Nessuna.}

\subsezione{TextFont}
\subsubsezione{Tipo, obiettivo e funzione del componente}
Rappresenta il font di un testo. Mantiene il nome del font, che prende come argomento il costruttore. Non viene fatto nessun controllo di validit\`a, in quanto la lista di font supportati dipende troppo dal browser usato e dalla sua versione, e i font invalidi vengono semplicemente ignorati. 
\subsubsezione{Relazioni d'uso di altre componenti}
Deriva da \textit{TextProperty} e implementa \textit{CSSProperty}.
\subsubsezione{Interfacce e relazioni di uso da altre componenti}
Usata dalla classe \textit{Text} che ne mantiene un'istanza.
\subsubsezione{Attivit\`a svolte e dati trattati}
\paragrafo{Attributi privati:}
\begin{elencopuntato}[\subsubsecindent]
\item[-] \textit{{\_}name} nome del font.
\end{elencopuntato}
\paragraph{Metodi pubblici:}
\begin{elencopuntato}[\subsubsecindent]
\item[-] \textit{toCSS()} ritorna {\_}name.
\item[-] \textit{applyToContext(context)} setta l'attributo \textit{font} del contesto grafico alla propria rappresentazione CSS.
\item[-] \textit{createWidget} crea e ritorna un'istanza di \textit{FontSetter} passando se stesso come parametro al costruttore.
\end{elencopuntato}

\subsezione{TextString}
\subsubsezione{Tipo, obiettivo e funzione del componente}
Rappresenta la stringa di un testo. Mantiene la stringa attualmente scritta.
\subsubsezione{Relazioni d'uso di altre componenti}
Deriva da \textit{TextProperty}.
\subsubsezione{Interfacce e relazioni di uso da altre componenti}
Usata dalla classe \textit{Text} che ne mantiene un'istanza.
\subsubsezione{Attivit\`a svolte e dati trattati}
\paragrafo{Attributi privati:}
\begin{elencopuntato}[\subsubsecindent]
\item[-] \textit{{\_}name} stringa di testo da scrivere o scritta.
\end{elencopuntato}
\paragraph{Metodi pubblici:}
\begin{elencopuntato}[\subsubsecindent]
\item[-] \textit{get/setName} permette di ottenere, o di modificare, la stringa di testo della casella.
\item[-] \textit{createWidget} crea e ritorna un'istanza di \textit{TextStringSetter} passando se stesso come parametro al costruttore.
\end{elencopuntato}

\subsezione{BoundingRectangle}
\subsubsezione{Tipo, obiettivo e funzione del componente}
Rappresenta la posizione e le dimensioni massime di una figura. Modificando il
\textit{BoundingRectangle} \`e possibile spostare, ingrandire e deformare una figura.
\`E responsabilit\`a delle singole figure, all'interno del metodo \textit{draw}, di disegnarsi all'interno dei limiti.
\subsubsezione{Relazioni d'uso di altre componenti}
Implementa \textit{Property}. Ogni istanza di \textit{Figure} ne mantiene un'istanza.
\subsubsezione{Interfacce e relazioni di uso da altre componenti}
Ogni istanza di una classe derivante da \textit{Figure} ha uno e un solo \textit{BoundingRectangle} che ne definisce i limiti. Modificandolo, \`e possibile ingrandire, deformare e spostare una figura, la quale \`e responsabile di adattarsi.
\subsubsezione{Attivit\`a svolte e dati trattati}
\paragrafo{Attributi privati:}
\begin{elencopuntato}[\subsubsecindent]
\item[-] \textit{{\_}start} angolo in alto a sinistra del rettangolo, di tipo \textit{Point}.
\item[-] \textit{{\_}end} angolo in basso a destra del rettangolo, di tipo \textit{Point}.
\end{elencopuntato}
\`E possibile che {\_}end abbia coordinate x ed y minori delle rispettive di {\_}start. In questo caso il rettangolo racchiude una figura rovesciata.
\paragraph{Metodi pubblici:}
\begin{elencopuntato}[\subsubsecindent]
\item[-] \textit{h()} ritorna l'altezza del rettangolo, calcolata come la differenza tra \textit{{\_}end.y} e \textit{{\_}start.y}. Pu\`o essere negativa.
\item[-] \textit{w()} ritorna la larghezza del rettangolo, calcolata come la differenza tra \textit{{\_}end.x} e \textit{{\_}start.x}. Pu\`o essere negativa.
\item[-] \textit{centre()} ritorna un \textit{Point} contenente le coordinate del centro del rettangolo.
\item[-] \textit{applyToContext(context)} trasla le coordinate del sistema ponendo {\_}start come origine, usando il metodo \textit{translate} di \textit{context}.
\item[-] \textit{createWidget()} crea e ritorna un'istanza di \textit{BoundingRectangleSetter} passando se stesso come parametro al costruttore.
\end{elencopuntato}

\subsezione{Circle}
\subsubsezione{Tipo, obiettivo e funzione del componente}
Rappresenta un cerchio o un'ellisse, a seconda che il proprio \textit{BoundingRectangle} sia un quadrato oppure un rettangolo. Viene disegnato in modo da essere inscritto al \textit{BoundingRectangle}.
\subsubsezione{Relazioni d'uso di altre componenti}
Deriva da \textit{Figure} e ne implementa i metodi astratti. Mantiene un'istanza di \textit{FillColour}. Implementa il metodo \textit{toSVG} dell'interfaccia \textit{SVGWritable} e il metodo \textit{fromSVG} dell'interfaccia \textit{SVGReadable}, si serve dei metodi della classe \textit{SVGGenerator}.
\subsubsezione{Interfacce e relazioni di uso da altre componenti}
Creato dalla lettura di un file SVG oppure dall'interfaccia utente. Manipolato dall'interfaccia utente. Chiamato da \textit{SVGWriter} per trasformare la figura in formato SVG, e da \textit{SVGReader} per creare un'istanza da un file SVG.
\subsubsezione{Attivit\`a svolte e dati trattati}
\paragrafo{Attributi privati:}
\begin{elencopuntato}[\subsubsecindent]
\item[-] \textit{{\_}fillColour} colore di riempimento, di tipo \textit{FillColour}.
\end{elencopuntato}
\paragraph{Metodi pubblici:}
\begin{elencopuntato}[\subsubsecindent]
\item[-] \textit{getFillColour()} ritorna \textit{{\_}fillColour}.
\item[-] \textit{eachProperty(fn)} richiama \textit{eachProperty} di \textit{Figure} ed applica la funzione fn a \textit{{\_}fillColour}.
\item[-] \textit{draw(canvas)} disegna il cerchio/ellisse usando quattro curve di bezier. Viene disegnato due volte: la prima per il riempimento, la seconda per il bordo. Prima di disegnarsi richiama \textit{applyToContext} sulle proprie propriet\`a.
\item[-] \textit{toSVG(gen)} crea un tag \textit{ellipse} con il metodo \textit{startCommand} e aggiunge gli attributi secondo lo standard SVG1.1 con il metodo \textit{attr}. Entrambi questi metodi appartengono alla classe \textit{SVGGenerator}. Per le coordinate \textit{x} e \textit{y} che indicano la posizione della figura, controlla se il punto indicato dal metodo \textit{start} di \textit{BoundingRectangle} sia effettivamente il punto in alto a sinistra, poich\`e il cerchio/ellisse potrebbe essere rovesciato. Infine scrive il tag di chiusura con il metodo \textit{endCommand} di \textit{SVGGenerator}.
\item[-] \textit{fromSVG(n)} ottiene il valore degli attributi del nodo \textit{n} come stringhe, li trasforma in interi quando necessario, e scrive i nuovi valori nelle propriet\`a della figura. 
%Infine ottiene l'elemento canvas e chiama il metodo \textit{draw} per far si che la figura si disegni.
\end{elencopuntato}

\subsezione{Rectangle}
\subsubsezione{Tipo, obiettivo e funzione del componente}
Rappresenta un rettangolo od un quadrato.
\subsubsezione{Relazioni d'uso di altre componenti}
Deriva da \textit{Figure} e ne implementa i metodi astratti. Mantiene un'istanza di \textit{FillColour}. Implementa il metodo \textit{toSVG} dell'interfaccia \textit{SVGWritable} e il metodo \textit{fromSVG} dell'interfaccia \textit{SVGReadable}, si serve dei metodi della classe \textit{SVGGenerator}.
\subsubsezione{Interfacce e relazioni di uso da altre componenti}
Creato dalla lettura di un file SVG oppure dall'interfaccia utente. Manipolato dall'interfaccia utente. Chiamato da \textit{SVGWriter} per trasformare la figura in formato SVG, e da \textit{SVGReader} per creare un'istanza da un file SVG.
\subsubsezione{Attivit\`a svolte e dati trattati}
\paragrafo{Attributi privati:}
\begin{elencopuntato}[\subsubsecindent]
\item[-] \textit{{\_}fillColour} colore di riempimento, di tipo \textit{FillColour}.
\end{elencopuntato}
\paragraph{Metodi pubblici:}
\begin{elencopuntato}[\subsubsecindent]
\item[-] \textit{getFillColour()} ritorna \textit{{\_}fillColour}.
\item[-] \textit{eachProperty(fn)} richiama \textit{eachProperty} di \textit{Figure} ed applica la funzione fn a \textit{{\_}fillColour}.
\item[-] \textit{draw(canvas)} disegna il rettangolo usando le API per i path del contesto grafico, tracciando un path chiuso che contiene i quattro angoli ricavabili dal \textit{BoundingRectangle}. Viene disegnato due volte: la prima per il riempimento, la seconda per il bordo. Prima di disegnarsi richiama \textit{applyToContext} sulle proprie propriet\`a.
\item[-] \textit{toSVG(gen)} crea un tag \textit{rect} con il metodo \textit{startCommand} e aggiunge gli attributi secondo lo standard SVG1.1 con il metodo \textit{attr}. Entrambi questi metodi appartengono alla classe \textit{SVGGenerator}. Per le coordinate \textit{x} e \textit{y} che indicano la posizione della figura, controlla se il punto indicato dal metodo \textit{start} di \textit{BoundingRectangle} sia effettivamente il punto in alto a sinistra, poich\`e il cerchio/ellisse potrebbe essere rovesciato. Infine scrive il tag di chiusura con il metodo \textit{endCommand} di \textit{SVGGenerator}.
\item[-] \textit{fromSVG(n)} ottiene il valore degli attributi del nodo \textit{n} come stringhe, li trasforma in interi quando necessario, e scrive i nuovi valori nelle propriet\`a della figura. 
%Infine ottiene l'elemento canvas e chiama il metodo \textit{draw} per far si che la figura si disegni.
\end{elencopuntato}

\subsezione{Line}
\subsubsezione{Tipo, obiettivo e funzione del componente}
Rappresenta una linea generica. Non viene implementata in JavaScript, in quanto \`e un'interfaccia.

\subsezione{StraightLine}
\subsubsezione{Tipo, obiettivo e funzione del componente}
Rappresenta una linea diritta. La linea v\`a dall'angolo in alto a sinistra all'angolo in basso a destra del \textit{BoundingRectangle}.
\subsubsezione{Relazioni d'uso di altre componenti}
Deriva da \textit{Line} e ne implementa i metodi astratti. Implementa il metodo \textit{toSVG} dell'interfaccia \textit{SVGWritable} e il metodo \textit{fromSVG} dell'interfaccia \textit{SVGReadable}, si serve dei metodi della classe \textit{SVGGenerator}.
\subsubsezione{Interfacce e relazioni di uso da altre componenti}
Creato dalla lettura di un file SVG oppure dall'interfaccia utente. Manipolato dall'interfaccia utente. Chiamato da \textit{SVGWriter} per trasformare la figura in formato SVG, e da \textit{SVGReader} per creare un'istanza da un file SVG.
\subsubsezione{Attivit\`a svolte e dati trattati}
\paragraph{Metodi pubblici:}
\begin{elencopuntato}[\subsubsecindent]
\item[-] \textit{draw(canvas)} disegna una linea diritta usando le API per i path del contesto grafico, tracciando un path da \textit{BoundingRectangle.start()} a \textit{BoundingRectangle.end()}. Prima di disegnarsi richiama \textit{applyToContext} sul colore del bordo.
\item[-] \textit{toSVG(gen)} crea un tag \textit{line} con il metodo \textit{startCommand} e aggiunge gli attributi secondo lo standard SVG1.1 con il metodo \textit{attr}. Entrambi questi metodi appartengono alla classe \textit{SVGGenerator}. Infine scrive il tag di chiusura con il metodo \textit{endCommand} di \textit{SVGGenerator}.
\item[-] \textit{fromSVG(n)} ottiene il valore degli attributi del nodo \textit{n} come stringhe, li trasforma in interi quando necessario, e scrive i nuovi valori nelle propriet\`a della figura. 
%Infine ottiene l'elemento canvas e chiama il metodo \textit{draw} per far si che la figura si disegni.
\end{elencopuntato}

\subsezione{FreeLine}
\subsubsezione{Tipo, obiettivo e funzione del componente}
Rappresenta una linea a mano libera. Viene implementata tramite delle curve di bezier brevi e ravvicinate tra di loro.
\subsubsezione{Relazioni d'uso di altre componenti}
Deriva da \textit{Line} e ne implementa i metodi astratti. Mantiene una lista di punti. I punti prendono come origine l'angolo in alto a sinistra del \textit{BoundingRectangle} e presuppongono un quadrato alto 1 e largo 1, in modo da essere indipendenti dal \textit{BoundingRectangle}. I punti verranno poi convertiti nei loro valori assoluti, a seconda del \textit{BoundingRectangle}, prima di disegnare la linea. Qualora ripetere questa computazione ad ogni refresh fosse troppo dispendioso, si potrebbe ricorrere ad un sistema di caching, ma non sembra necessario. Implementa il metodo \textit{toSVG} dell'interfaccia \textit{SVGWritable} e si serve dei metodi della classe \textit{SVGGenerator}.
\subsubsezione{Interfacce e relazioni di uso da altre componenti}
Creato dalla lettura di un file SVG oppure dall'interfaccia utente. Manipolato dall'interfaccia utente. Chiamato da \textit{SVGWriter} per trasformare la figura in formato SVG. \textit{BezierCurve} ne eredita i metodi.
\subsubsezione{Attivit\`a svolte e dati trattati}
\paragrafo{Attributi privati:}
\begin{elencopuntato}[\subsubsecindent]
\item[-] \textit{{\_}pts} i punti di controllo della linea, memorizzati con coordinate relative. Il primo punto \`e l'inizio della linea, e i successivi seguono lo schema: punto di controllo 1, punto di controllo 2, punto di fine curva. Il punto di fine curva diventa l'inizio di quella successiva.
\end{elencopuntato}
\paragraph{Metodi pubblici:}
\begin{elencopuntato}[\subsubsecindent]
\item[-] \textit{extend(point)} aggiunge un punto avente coordinate assolute ai punti di controllo. Nel caso il punto esca dal \textit{BoundingRectangle}, il \textit{BoundingRectangle} viene ampliato e tutti i punti di controllo (con coordinate relative) vengono ricalcolati in modo che mantengano la posizione precedente. Per ricalcolare i punti si convertono a valore assoluto, si modifica il \textit{BoundingRectangle}, si aggiunge il nuovo punto e si riconvertono i 
punti al loro valore relativo.
\item[-] \textit{move(point, to)} muove il punto di controllo \textit{point} (se appartiene alla linea) e lo mette in \textit{to}. Aggiusta il \textit{BoundingRectangle} di conseguenza. I due punti hanno coordinate assolute.
\item[-] \textit{getPoints()} ritorna un array con una copia dei punti di controllo della linea convertiti a coordinate assolute in base al \textit{BoundingRectangle}. Per ogni punto, si somma \textit{{\_}start} e si moltiplica la x per la larghezza e la y per l'altezza del \textit{BoundingRectangle}.
\item[-] \textit{getMainPoints()} ritorna un array ottenuto concatenando l'array di \textit{getMainPoints} della superclasse e i punti ottenuti con \textit{getPoints}.
\item[-] \textit{draw(canvas)} chiama \textit{applyToContext} sul colore del bordo e ottiene i punti di controllo assoluti tramite \textit{getPoints}. Usa il primo punto come inizio della prima curva e raggruppa i punti a 3 a 3 e per ogni gruppo traccia una curva di bezier. Se rimangono due punti traccia una quadratica e se ne rimane uno solo una linea diritta.
\item[-] \textit{drawSelection(canvas)} richiama \textit{drawSelection} di \textit{Figure} e disegna le tangenti alla curva di colore grigio con opacit\`a 0.8. Le tangenti sono dei segmenti che congiungono il punto di inizio/fine curva al relativo punto di controllo.
\item[-] \textit{toSVG(gen)} crea un tag \textit{line} con il metodo \textit{startCommand} e aggiunge gli attributi secondo lo standard SVG1.1 con il metodo \textit{attr}. Entrambi questi metodi appartengono alla classe \textit{SVGGenerator}. Per costruire l'attributo SVG \textit{d} il metodo scrive delle curve cubiche i punti a tre a tre, e per i punti rimanenti scrive una curva quadratica se ne restano due e una linea retta se ne resta uno. Infine scrive il tag di chiusura con il metodo \textit{endCommand} di \textit{SVGGenerator}.
\end{elencopuntato}

\subsezione{BezierCurve}
\subsubsezione{Tipo, obiettivo e funzione del componente}
Rappresenta una linea curva, disegnata tramite curve di bezier.
\subsubsezione{Relazioni d'uso di altre componenti}
Deriva da \textit{FreeLine}. A differenza di \textit{FreeLine} la lista di punti interni contiene un numero ridotto di punti. Implementa il metodo \textit{fromSVG} dell'interfaccia \textit{SVGReadable}.
\subsubsezione{Interfacce e relazioni di uso da altre componenti}
Creato dalla lettura di un file SVG oppure dall'interfaccia utente. Manipolato dall'interfaccia utente. Chiamato da \textit{SVGReader} per creare un'istanza da un file SVG.
\subsubsezione{Attivit\`a svolte e dati trattati}
Nessuna oltre a quelle ereditate da \textit{FreeLine}.
\paragraph{Metodi pubblici:}
\begin{elencopuntato}[\subsubsecindent]
\item[-] \textit{fromSVG(n)} ottiene il valore degli attributi del nodo \textit{n} come stringhe e scrive i nuovi valori nelle propriet\`a della figura. Per gestire l'attributo SVG \textit{d}, spezza la stringa in coppie di coordinate, le trasforma in interi, e chiama la funzione \textit{extend} passandogli uno a uno i punti ottenuti per ricostruire la figura. 
%Infine ottiene l'elemento canvas e chiama il metodo \textit{draw} per far si che la figura si disegni.
\end{elencopuntato}


\subsezione{Polygon}
\subsubsezione{Tipo, obiettivo e funzione del componente}
Rappresenta un poligono regolare.
\subsubsezione{Relazioni d'uso di altre componenti}
Deriva da \textit{Figure} e ne implementa i metodi astratti. Mantiene un'istanza di \textit{FillColour} e di \textit{EdgeNumber} che ne identifica il numero di lati. Implementa il metodo \textit{toSVG} dell'interfaccia \textit{SVGWritable} e il metodo \textit{fromSVG} dell'interfaccia \textit{SVGReadable}, si serve dei metodi della classe \textit{SVGGenerator}.
\subsubsezione{Interfacce e relazioni di uso da altre componenti}
Creato dalla lettura di un file SVG oppure dall'interfaccia utente. Manipolato dall'interfaccia utente. Chiamato da \textit{SVGWriter} per trasformare la figura in formato SVG, e da \textit{SVGReader} per creare un'istanza da un file SVG.
\subsubsezione{Attivit\`a svolte e dati trattati}
\paragrafo{Attributi privati:}
\begin{elencopuntato}[\subsubsecindent]
\item[-] \textit{{\_}fillColour} colore di riempimento, di tipo \textit{FillColour}.
\item[-] \textit{{\_}en} numero di spigoli del poligono, di tipo \textit{EdgeNumber}.
\end{elencopuntato}
\paragraph{Metodi pubblici:}
\begin{elencopuntato}[\subsubsecindent]
\item[-] \textit{getFillColour()} ritorna \textit{{\_}fillColour}.
\item[-] \textit{edgeNumber()} ritorna \textit{{\_}en}.
\item[-] \textit{eachProperty(fn)} richiama \textit{eachProperty} di \textit{Figure} ed applica la funzione fn a \textit{{\_}fillColour} e a \textit{{\_en}}.
\item[-] \textit{getPoints()} ritorna un'array di punti, considerando come origine \textit{BoundingRectangle.start()}, che rappresentano i vertici del poligono. Come si vede nel diagramma di attivit\`a in figura 2, si calcolano i punti usando le formule x = cos(angolo*i)*w+xs e y = sin(angolo*i)*h+ys dove \textit{angolo} \`e l'angolo giro diviso per il numero di lati, i \`e il numero del punto attuale (da 0 al numero di lati meno uno) e la coppia (xs, ys) \`e \textit{BoundingRectangle.start()}.

\begin{figure}[!ht]
\centering
\includegraphics[scale=0.5]{polygonpoints.png}
\caption{Diagramma di attivit\`a calcolo punti poligono}
\end{figure}

\item[-] \textit{draw(canvas)} disegna il poligono usando le API per i path del contesto grafico tracciando  un path che congiunge i punti ottenuti con \textit{getPoints}. Viene disegnato due volte: la prima per il riempimento, la seconda per il bordo. Prima di disegnarsi richiama \textit{applyToContext} sulle proprie propriet\`a.
\item[-] \textit{toSVG(gen)} crea un tag \textit{polygon} con il metodo \textit{startCommand} e aggiunge gli attributi secondo lo standard SVG1.1 con il metodo \textit{attr}. Entrambi questi metodi appartengono alla classe \textit{SVGGenerator}. Per quel che riguarda l'attributo \textit{points} si prendono i punti relativi al \textit{BoundingRectangle} con il metodo \textit{getPoints} e si sommano al punto di coordinate iniziali ottenuto con il metodo \textit{start} di \textit{BoundingRectangle}, per ottenere le coordinate relative al canvas. Infine scrive il tag di chiusura con il metodo \textit{endCommand} di \textit{SVGGenerator}.
\item[-] \textit{fromSVG(n)} ottiene il valore degli attributi del nodo \textit{n} come stringhe e scrive i nuovi valori nelle propriet\`a della figura. Dall'attributo SVG \textit{points} ottiene i punti, li converte in interi, e calcola in base a questi i vertici in alto a sinistra e in basso a destra della figura, per ricavare il \textit{BoundingRectangle} con cui costruire il poligono. 
%Infine ottiene l'elemento canvas e chiama il metodo \textit{draw} per far si che la figura si disegni.
\end{elencopuntato}

\subsezione{Text}
\subsubsezione{Tipo, obiettivo e funzione del componente}
Rappresenta un testo.
\subsubsezione{Relazioni d'uso di altre componenti}
Deriva da \textit{Figure} e ne implementa i metodi astratti. Mantiene un'istanza di \textit{FillColour} e di \textit{TextFont} che identifica il font del testo. Implementa il metodo \textit{toSVG} dell'interfaccia \textit{SVGWritable} e il metodo \textit{fromSVG} dell'interfaccia \textit{SVGReadable}, si serve dei metodi della classe \textit{SVGGenerator}.
\subsubsezione{Interfacce e relazioni di uso da altre componenti}
Creato dalla lettura di un file SVG oppure dall'interfaccia utente. Manipolato dall'interfaccia utente. Chiamato da \textit{SVGWriter} per trasformare la figura in formato SVG, e da \textit{SVGReader} per creare un'istanza da un file SVG.
\subsubsezione{Attivit\`a svolte e dati trattati}
Nel costruttorte viene controllato se il browser supporta le API per il disegno del testo. In caso contrario, il metodo \textit{draw} viene settato a \textit{fallbackDraw}.
\paragrafo{Attributi privati:}
\begin{elencopuntato}[\subsubsecindent]
\item[-] \textit{{\_}fillColour} colore di riempimento, di tipo \textit{FillColour}.
\item[-] \textit{{\_}font} font del testo, di tipo \textit{TextFont}.
\item[-] \textit{{\_}txt} stringa contenente il testo da disegnare.
\end{elencopuntato}
\paragraph{Metodi pubblici:}
\begin{elencopuntato}[\subsubsecindent]
\item[-] \textit{getTextColour()} ritorna \textit{{\_}fillColour}.
\item[-] \textit{get/setFont()} ottiene/modifica \textit{{\_}font}.
\item[-] \textit{get/setText()} ottiene/modifica \textit{{\_}txt}.
\item[-] \textit{eachProperty(fn)} richiama \textit{eachProperty} di \textit{Figure} ed applica la funzione fn a \textit{{\_}fillColour} e a \textit{{\_}font}.
\item[-] \textit{draw(canvas)} disegna il \textit{{\_}txt} usando le API del contesto grafico. L'altezza del testo \`e uguale all'altezza del \textit{BoundingRectangle}, mentre la larghezza del \textit{BoundingRectangle} definisce la larghezza massima del testo. Viene disegnato due volte: la prima per il riempimento, la seconda per il bordo. Prima di disegnarsi richiama \textit{applyToContext} sui colori del bordo e di riempimento, e setta l'attributo \textit{font} del contesto grafico all'altezza assoluta del \textit{BoundingRectangle} in pixel, seguita dalla rappresentazione CSS di \textit{{\_}font}.
\item[-] \textit{fallbackDraw(canvas)} metodo usato al posto di \textit{draw} quando il browser non ha il supporto per il testo. Disegna il testo usando i metodi della libreria \textit{canvastext.js}. Visti i limiti della libreria, ignora il colore di riempimento ed il font.
\item[-] \textit{toSVG(gen)} crea un tag \textit{text} con il metodo \textit{startCommand} e aggiunge gli attributi secondo lo standard SVG1.1 con il metodo \textit{attr}. Entrambi questi metodi appartengono alla classe \textit{SVGGenerator}. Come coordinate di riferimento per la figura si ricava il punto in basso a sinistra, e si serve del metodo \textit{text} di \textit{SVGGenerator} per scrivere il testo dell'elemento. Infine scrive il tag di chiusura con il metodo \textit{endCommand} di \textit{SVGGenerator}.
\item[-] \textit{fromSVG(n)} ottiene il valore degli attributi del nodo \textit{n} come stringhe, li trasforma in interi quando necessario, aggiorna il \textit{BoundingRectangle} su cui si basa il costruttore per disegnare il testo e scrive i nuovi valori nelle propriet\`a della figura.  
\end{elencopuntato}

\sezione{Specifica delle componenti - ApplicationLogic, conversione SVG}
Gestisce i processi di conversione da e verso il formato SVG. Si riportano i diagrammi delle classi che implementano le funzionalit\`a di serializzazione e deserializzazione. Metodi e attributi non sono riportati nel diagramma perch\`e ampiamente descritti testualmente in seguito.

\begin{figure}[!ht]
\centering
\includegraphics[scale=0.5]{applogic_readwrite.png}
\caption{Classi e loro relazioni - scrittura e lettura}
\end{figure}

\subsezione{SVGWriter}
\subsubsezione{Tipo, obiettivo e funzione del componente}
Si occupa di chiamare il metodo \textit{toSVG} su ogni figura e ritornare una stringa rappresentate il documento SVG che corrisponde alla situazione corrente del canvas.
\subsubsezione{Relazioni d'uso di altre componenti}
Si serve di \textit{SVGGenerator} per creare la stringa e ritornarla, del metodo \textit{each} per iterare attraverso la collezione di figure.
\subsubsezione{Interfacce e relazioni di uso da altre componenti}
Nessuna.
\subsubsezione{Attivit\`a svolte e dati trattati}
\paragrafo{Metodi pubblici:}
\begin{elencopuntato}[\subsubsecindent]
\item[-]  \textit{write()} chiama il costruttore \textit{SVGGenerator} ottenendo cos\`i il documento sotto forma di stringa con l'header SVG gi\`a inserito. Poi chiama il metodo \textit{toSVG} su ogni figura e ritorna la stringa rappresentante il documento SVG con il metodo \textit{flush} di \textit{SVGGenerator}.
\end{elencopuntato}

\subsezione{SVGGenerator}
\subsubsezione{Tipo, obiettivo e funzione del componente}
Contiene la stringa rappresentante il documento SVG in costruzione e i metodi per gestirlo.
\subsubsezione{Relazioni d'uso di altre componenti}
Nessuna.
\subsubsezione{Interfacce e relazioni di uso da altre componenti}
Usato da \textit{SVGWriter} per ottenere e ritornare la stringa rappresentateil documento SVG.
\subsubsezione{Attivit\`a svolte e dati trattati}
\paragrafo{Attributi privati:}
\begin{elencopuntato}[\subsubsecindent]
\item[-] \textit{{\_}doc} stringa che rappresenta il documento SVG in costruzione.
Per maggiori dettagli si veda il diagramma di stato: \newpage

\begin{figure}[!ht]
\centering
\includegraphics[scale=0.7]{svgdocument.png}
\caption{Diagramma di stato del documento SVG}
\end{figure}

\end{elencopuntato}
\paragrafo{Metodi pubblici:}
\begin{elencopuntato}[\subsubsecindent]
\item[-]  \textit{startCommand(name)} apre un tag SVG con il valore \textit{name}. 
\item[-]  \textit{attr(name, value, last)} aggiunge un attributo \textit{name} con valore \textit{value}. Se il valore booleano \textit{last} \`e \textit{true} chiude il tag di apertura.
\item[-]  \textit{text(t)} scrive il testo contenuto nella stringa \textit{t} tra un tag di apertura e il corrispondente di chiusura.
\item[-]  \textit{endCommand(name)} aggiunge un tag SVG di chiusura con il valore \textit{name}.
\item[-]  \textit{flush()} aggiunge il tag di chiusura \textit{</svg>} e ritorna la stringa rappresentante il documento SVG.
\end{elencopuntato}


\subsezione{SVGReader}
\subsubsezione{Tipo, obiettivo e funzione del componente}
Si occupa di chiamare il metodo \textit{fromSVG} su ogni tag SVG e ritornare un'istanza di \textit{FigureSet} corrispondente alla situazione corrente nel file SVG.
\subsubsezione{Relazioni d'uso di altre componenti}
Mantiene un'istanza di \text{FigureSet} e si serve del metodo \textit{fromSVG}.
Utilizza \textit{XMLParser} per fare il \underline{parsing} del documento come XML, e il metodo \textit{makeFigureClassFromTag} della classe \textit{SVGElementRegistry}.
Si serve della classe \textit{ParsingError} per gestire gli errori.
\subsubsezione{Interfacce e relazioni di uso da altre componenti}
Nessuna.
\subsubsezione{Attivit\`a svolte e dati trattati}
\paragrafo{Metodi pubblici:}
\begin{elencopuntato}[\subsubsecindent]
\item[-]  \textit{read(doc)} ottiene un modello \underline{DOM} dalla stringa \textit{doc} attraverso il metodo \textit{parsing} di \textit{XMLParser} e lancia un errore se l'operazione non ha successo. Itera il DOM per accedere ai tag; per ognuno controlla che sia presente nella tabella della classe \textit{SVGElementRegistry} e in caso affermativo chiama il metodo \textit{fromSVG} sull'istanza della corrispondente figura. Infine aggiunge la figura all'istanza di \textit{FigureSet}.
\end{elencopuntato}



\subsezione{XMLParser}
\subsubsezione{Tipo, obiettivo e funzione del componente}
Si occupa di fare il parsing XML della stringa rappresentante il documento SVG e di ritornare il DOM corrispondente.
\subsubsezione{Relazioni d'uso di altre componenti}
Nessuna.
\subsubsezione{Interfacce e relazioni di uso da altre componenti}
Usato da \textit{SVGReader} per ottenere il modello DOM dalla stringa rappresentante il documento SVG.
\subsubsezione{Attivit\`a svolte e dati trattati}
\paragrafo{Metodi pubblici:}
\begin{elencopuntato}[\subsubsecindent]
\item[-] \textit{parsing(doc)} crea un documento XML vuoto (un documento Microsoft se il browser in uso \`e Internet Explorer) e ci carica dentro la stringa \textit{doc}. Se riscontra un errore nel parsing del file fa apparire una finestra che da informazioni sulla posizione e sulla natura di tale errore.
\end{elencopuntato}

\subsezione{SVGElementRegistry}
\subsubsezione{Tipo, obiettivo e funzione del componente}
Contiene una \underline{tabella di hash} che indica quali figure sono implementate e si occupa di creare un'istanza di una figura in base al tag SVG.
\subsubsezione{Relazioni d'uso di altre componenti}
Usa i costruttori delle figure per ritornarne un'istanza.
\subsubsezione{Interfacce e relazioni di uso da altre componenti}
Usato da \textit{SVGReader} per ottenere una figura da un tag SVG.
\subsubsezione{Attivit\`a svolte e dati trattati}
\paragrafo{Attributi privati:}
\begin{elencopuntato}[\subsubsecindent]
\item[-] \textit{{\_}reg} tabella di hash in cui ad ogni figura corrisponde un costruttore.
\end{elencopuntato}
\paragrafo{Metodi pubblici:}
\begin{elencopuntato}[\subsubsecindent]
\item[-] \textit{register(tagName, constructor)} aggiunge un elemento alla tabella di hash, usando come indice \textit{tagName} e come valore \textit{constructor}, che sar\`a un costruttore di una figura.
\item[-] \textit{makeFigureClassFromTag(tag)} controlla se nella tabella di hash esiste un indice \textit{tag}: se \`e presente crea una figura corrispondente utilizzando il cotruttore ottenuto dalla tabella, altrimenti ritorna \textit{null}.
\end{elencopuntato}

\sezione{Specifica delle componenti - \underline{Server}}
Permette l'accesso all'applicazione ed al manuale utente, gestisce il salvataggio ed il caricamento di file.

\subsezione{Request}
\subsubsezione{Tipo, obiettivo e funzione del componente}
Classe che accetta le richieste dal \underline{client} e le inoltra alla classe \textit{Server}. Permette la comunicazione tra il client e il server.
\subsubsezione{Relazioni d'uso di altre componenti}
Utilizza istanze di \textit{Server} e di \textit{ConnectionError}.
\subsubsezione{Interfacce e relazioni di uso da altre componenti}
\`E utilizzata dal client per inviare una richiesta al server.
\subsubsezione{Attivit\`a svolte e dati trattati}
\paragrafo{Metodi pubblici:}
\begin{elencopuntato}[\subsubsecindent]
\item[-] \textit{service(HttpServletRequest,HttpServletResponse)} \`e il metodo proprio della servlet che comunica con il client, gestendo le richieste e le risposte. 
\end{elencopuntato}[\subsubsecindent]

\subsezione{Server}
\subsubsezione{Tipo, obiettivo e funzione del componente}
Classe che permette di effettuare un salvataggio o un caricamento in seguito ad una richiesta del client.
\subsubsezione{Relazioni d'uso di altre componenti}
Utilizza istanze di \textit{File}, \textit{ServerError} e \textit{Clean}.
\subsubsezione{Interfacce e relazioni di uso da altre componenti}
\textit{Request} ne mantiene un'istanza.
\subsubsezione{Attivit\`a svolte e dati trattati}
\paragrafo{Attributi privati:}
\begin{elencopuntato}[\subsubsecindent]
\item[-] \textit{target} \`e il file da caricare.
\item[-] \textit{nameFile} \`e il file nel quale effettuare il salvataggio.
\item[-] \textit{content} rappresenta il contenuto da salvare.
\end{elencopuntato}
\paragrafo{Metodi pubblici:}
\begin{elencopuntato}[\subsubsecindent]
\item[-] \textit{getSave()} richiede il salvataggio del file rappresentato da \textit{nameFile} con il contenuto \textit{content} e ritorna il nome del file salvato. Questo file viene poi scaricato in locale dal client.
\item[-] \textit{getLoad()} richiede il caricamento del file rappresentato da \textit{target} e ritorna il file da caricare.
\end{elencopuntato}



\subsezione{File}
\subsubsezione{Tipo, obiettivo e funzione del componente}
Classe che effettua tutte le operazioni riguardanti i files risiedenti su disco. Fornisce a \textit{Server} il file salvato o caricato. 
\subsubsezione{Relazioni d'uso di altre componenti}
Utilizza istanze di \textit{FileNotFound}.
\subsubsezione{Interfacce e relazioni di uso da altre componenti}
\textit{Server} e \textit{Clean} ne mantengono un'istanza.
\subsubsezione{Attivit\`a svolte e dati trattati}
\paragrafo{Attributi privati:}
\begin{elencopuntato}[\subsubsecindent]
\item[-] \textit{fileLoad} \`e il valore che viene ritornato in seguito ad una richiesta di caricamento da parte di \textit{Server}.
\item[-] \textit{fileSave} \`e il valore che viene ritornato in seguito ad una richiesta di salvataggio da parte di \textit{Server}.
\item[-] \textit{text} \`e il contenuto da salvare in \textit{fileSave}.
\end{elencopuntato}
\paragrafo{Metodi pubblici:}
\begin{elencopuntato}[\subsubsecindent]
\item[-] \textit{getFile()} ritorna un file salvato o da caricare.
\item[-] \textit{deleteFile(File)} elimina il file passato come parametro.
\end{elencopuntato}


\subsezione{Clean}
\subsubsezione{Tipo, obiettivo e funzione del componente}
Classe che permette di verificare la presenza nel server di file non utilizzati e provvedere alla loro rimozione.
\subsubsezione{Relazioni d'uso di altre componenti}
Mantiene un'istanza di \textit{File}.
\subsubsezione{Interfacce e relazioni di uso da altre componenti}
\textit{Server} ne mantiene un'istanza.
\subsubsezione{Attivit\`a svolte e dati trattati}
\paragrafo{Metodi pubblici:}
\begin{elencopuntato}[\subsubsecindent]
\item[-] \textit{sweeper()} controlla tramite una classe filtro se esistono dei file sul server inutilizzati da un determinato periodo di tempo, e li rimuove usando la classe \textit{File}.
\end{elencopuntato}

\subsezione{CommunicationError}
\subsubsezione{Tipo, obiettivo e funzione del componente}
Rappresenta un errore generico di comunicazione. Non viene implementata in quanto \`e un'interfaccia. 
\subsubsezione{Relazioni d'uso di altre componenti}
Nessuna.
\subsubsezione{Interfacce e relazioni di uso da altre componenti}
Implementata da \textit{ConnectionServer} e da \textit{ServerError}.
\subsubsezione{Attivit\`a svolte e dati trattati}
\paragrafo{Metodi pubblici:}
\begin{elencopuntato}[\subsubsecindent]
\item[-] \textit{getError} ritorna l'errore di comunicazione.
\end{elencopuntato}


\subsezione{ConnectionError}
\subsubsezione{Tipo, obiettivo e funzione del componente}
Classe concreta che rappresenta un errore generato da un connessione con il server.
\subsubsezione{Relazioni d'uso di altre componenti}
Implementa \textit{CommunicationError}.
\subsubsezione{Interfacce e relazioni di uso da altre componenti}
\textit{Request} ne mantiene un'istanza.
\subsubsezione{Attivit\`a svolte e dati trattati}
\paragrafo{Metodi pubblici:}
\begin{elencopuntato}[\subsubsecindent]
\item[-] \textit{getError()} ritorna l'errore di connessione riscontrato.
\end{elencopuntato}

\subsezione{ServerError}
\subsubsezione{Tipo, obiettivo e funzione del componente}
Classe concreta che rappresenta un errore interno del server.
\subsubsezione{Relazioni d'uso di altre componenti}
Implementa \textit{CommunicationError}.
\subsubsezione{Interfacce e relazioni di uso da altre componenti}
\textit{Server} ne mantiene un'istanza.
\subsubsezione{Attivit\`a svolte e dati trattati}
\paragrafo{Metodi pubblici:}
\begin{elencopuntato}[\subsubsecindent]
\item[-] \textit{getError()} ritorna l'errore del server riscontrato.
\end{elencopuntato}


\subsezione{FileNotFound}
\subsubsezione{Tipo, obiettivo e funzione del componente}
Classe che viene istanziata nel caso di una richiesta di un file non presente su disco.
\subsubsezione{Relazioni d'uso di altre componenti}
Nessuna.
\subsubsezione{Interfacce e relazioni di uso da altre componenti}
\textit{File} ne mantiene un'istanza.
\subsubsezione{Attivit\`a svolte e dati trattati}
\paragrafo{Metodi pubblici:}
\begin{elencopuntato}[\subsubsecindent]
\item[-] \textit{getFileNotFound()} ritorna l'errore di file non trovato.
\end{elencopuntato}


\sezione{Tracciamento della relazione componenti - requisiti}


\subsezione{Tracciamento Componenti - Requisiti}
\begin{table}[h]
\begin{center}
     \begin{tabular}
           {@{\extracolsep{\fill}}|c|c|}
     \hline
     \multicolumn{2}{|c|}{ \textbf{Componenti GUI} } \\
     \hline
%%%%%%%%%%%%%%INTESTAZIONE COLONNE%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
      \textbf{Componenti} & \textbf{Requisiti} \\
%%%%%%%%%%%%%%FINE INTESTAZIONE COLONNE%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
      \hline
     Page & RQO-7, RQO-9, RAO-1, RAO-6\\
     \hline
     Scale & RFO-14\\
     \hline
     Visualization & RFO-13, RFO-14 \\
     \hline   
     Canvas & RFO-17, RAD-1 \\
     \hline  
     Toolbar & RFO-11, RIO-1 \\
     \hline        
     Button & RIO-1\\
     \hline
     ClearCanvasButton & RFO-17\\
     \hline     
     SelectionButton & RFO-8, RFO-10\\
     \hline     
     ZoomButton & RFO-14\\
     \hline       
     ZoomInButton & RFO-14\\
     \hline    
     ZoomOutButton & RFO-14\\
     \hline 
     MoveViewButton & RFO-13\\
     \hline
     StraightLineButton & RFO-1\\
     \hline
 	 BezierCurveButton & RFO-2\\
 	 \hline
 	 SquareButton & RFO-3\\
 	 \hline
 	 CircleButton & RFO-5\\
 	 \hline 
 	 PolygonButton & RFO-4\\
 	 \hline
 	 FreeLineButton & RFD-1\\
 	 \hline
 	 CloneButton & RFD-3\\
 	 \hline
 	 Textbutton & RFO-6\\
 	 \hline
     Palette & RFO-9 \\
     \hline
     PaletteComponent & RFO-9\\
     \hline
     ColourDialog & RFO-9\\
     \hline
     PropertiesDialog & RFO-12 \\ 
     \hline 
     BoundingRectangleSetter & RFO-10 \\
     \hline     	              
	 EdgeNumberSetter & RFO-12\\
	 \hline
	 RotationSetter & RFF-3 \\
%%%%%%%%%%% FINE PARTE DA MODIFICARE %%%%%%%%%%%%%%%%
    \hline %%FINE RIGA
%%%%%%%%%%% FINE PARTE DA MODIFICARE %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
    \end{tabular}
  \caption{Componenti GUI - Requisiti} %INSERIRE DIDASCALIA - SE NECESSARIA -
  \label{tab:requisitiGUI}
  \end{center}
\end{table}
\newpage

\begin{table}[h]
\begin{center}
     \begin{tabular}
           {@{\extracolsep{\fill}}|c|c|}
      		\hline
           \multicolumn{2}{|c|}{ \textbf{Componenti ApplicationLogic} } \\
     \hline
%%%%%%%%%%%%%%INTESTAZIONE COLONNE%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
      \textbf{Componenti} & \textbf{Requisiti} \\
%%%%%%%%%%%%%%FINE INTESTAZIONE COLONNE%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
      \hline
     SVGWriter & RFO-15 \\
     \hline
     SVGReader & RFO-16\\
     \hline
     SVGGenerator & RFO-15, RFO-16\\
     \hline
     SVGElementRegistry & RFO-16\\
     \hline
     XMLParser & RFO-16\\
     \hline
     FigureSet & RFO-8, RFO-12, RFO-18 \\
     \hline
     Figure & RFO-8, RFO-12, RFD-3 \\
     \hline
     StraightLine & RFO-1 \\
     \hline
     BezierCurve & RFO-2 \\
     \hline
     Rectangle & RFO-3 \\
     \hline
     Polygon & RFO-4 \\ 
     \hline
     EdgeNumebr & RFO-4 \\
     \hline
     Circle & RFO-5 \\
     \hline
     Text & RFO-6, RFO-7 \\
     \hline
     TextProperty & RFO-7 \\
     \hline
     TextFont & RFO-7 \\
     \hline
     TextSize & RFO-7\\
     \hline
     Colour & RFO-9 \\
     \hline
     FillColour & RFO-9 \\
     \hline
     Rotation & RFF-3 \\
     \hline
     TextColour & RFO-9 \\
     \hline
     Opacity & RFO-9 \\
     \hline
     CssProperty & RFO-9 \\
     \hline
     BoundingRectangle & RFO-10 \\
     \hline
     Property & RFO-12 \\
     \hline
     FreeLine & RFD-1 \\ 
     \hline
     Line & RFO-1, RFD-1 \\
%%%%%%%%%%% PARTE DA MODIFICARE %%%%%%%%%%%%%%%%
    \hline %%FINE RIGA
%%%%%%%%%%% FINE PARTE DA MODIFICARE %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
    \end{tabular}
  \caption{Componenti ApplicationLogic - Requisiti} %INSERIRE DIDASCALIA - SE NECESSARIA -
  \label{tab:requisitiAL}
  \end{center}
\end{table}
\newpage

\begin{table}[h]
\begin{center}
     \begin{tabular}
           {@{\extracolsep{\fill}}|c|c|}
           \hline
           \multicolumn{2}{|c|}{ \textbf{Componenti DocBackend} }\\
     \hline
%%%%%%%%%%%%%%INTESTAZIONE COLONNE%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
      \textbf{Componenti} & \textbf{Requisiti} \\
%%%%%%%%%%%%%%FINE INTESTAZIONE COLONNE%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
      \hline
     Request & RFO-15, RFO-16 \\
     \hline
     CommunicationError & RFO-15, RFO-16 \\
     \hline
     ConnectionError & RFO-15, RFO-16 \\
     \hline
     ServerError & RFO-15, RFO-16 \\
     \hline
     Server & RFO-15, RFO-16, RIO-2, RIO-3 \\
     \hline
     FileNotFound & RFO-15 \\
     \hline
     File & RFO-15 \\
     \hline
     Clean & RFO-15 \\
         
%%%%%%%%%%% PARTE DA MODIFICARE %%%%%%%%%%%%%%%%
    \hline %%FINE RIGA
%%%%%%%%%%% FINE PARTE DA MODIFICARE %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
    \end{tabular}
  \caption{Componenti DocBackend - Requisiti} %INSERIRE DIDASCALIA - SE NECESSARIA -
  \label{tab:requisitiDocBackend}
  \end{center}
\end{table}
\newpage

\subsezione{Tracciamento Requisiti - Componenti}
\begin{table}[h]
\begin{center}
     \begin{tabular}
           {@{\extracolsep{\fill}}|c|c|}
      		\hline
           \multicolumn{2}{|c|}{ \textbf{Requisiti - Componenti} } \\
     \hline
%%%%%%%%%%%%%%INTESTAZIONE COLONNE%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
      \textbf{Requisiti} & \textbf{Componenti} \\
%%%%%%%%%%%%%%FINE INTESTAZIONE COLONNE%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
      \hline
      RFO-1 & StraightLineButton, StraightLine, Line\\
      \hline
      RFO-2 & BezierCurveButton, BezierCurve, Line\\
      \hline
      RFO-3 & SquareButton, Rectangle\\
      \hline
      RFO-4 & PolygonButton, Polygon\\
      \hline
      RFO-5 & CircleButton, Circle\\
      \hline
      RFO-6 & TextButton, Text\\
      \hline
      RFO-7 & Text, TextProperty, TextFont, TextSize\\
      \hline
      RFO-8 & SelectionButton, FigureSet, Figure\\
      \hline
      \multirow{2}{*}{RFO-9} & Palette, PaletteComponent, ColourDialog, Colour,\\ & FillColour, TextColour, Opacity, CssProperty\\
      \hline
      RFO-10 & BoundingRectangleSetter, SelectionButton, BoundingRectangle\\
      \hline
      RFO-11 & Toolbar\\
      \hline
      RFO-12 & PropertiesDialog, EdgeNumberSetter, FigureSet, Figure, Property\\
      \hline
      RFO-13 & Visualization, MoveViewButton\\
      \hline
      RFO-14 & Scale, Visualization, ZoomButton, ZoomInButton, ZoomOutButton\\
      \hline
      \multirow{2}{*}{RFO-15} & SVGWriter, SVGGenerator, Request, CommunicationError, \\ & ConnectionError, ServerError, Server, FileNotFound, File, Clean\\
      \hline
      \multirow{2}{*}{RFO-16} & SVGReader, SVGGenerator, SVGElementRegistry, XMLParser, \\ & Request, CommunicationError, ConnectionError, ServerError, Server\\
      \hline
      RFO-17 & Canvas, ClearCanvasButton\\
      \hline
      RFO-18 & FigureSet\\
      \hline
      RFD-1 & FreeLineButton, FreeLine, Line\\
      \hline
      RFD-3 & CloneButton, Figure\\
      \hline
      RFF-3 & RotationSetter, Rotation\\
      \hline
      RQO-7 & Page\\
      \hline
      RQO-9 & Page\\
      \hline
      RIO-1 & Button\\
      \hline
      RIO-2 & Server \\
      \hline
      RIO-3 & Server \\
      \hline
      RAO-1 & Page\\
      \hline
      RAO-6 & Page\\
      \hline
      RAD-1 & Canvas\\
%%%%%%%%%%% PARTE DA MODIFICARE %%%%%%%%%%%%%%%%
    \hline %%FINE RIGA
%%%%%%%%%%% FINE PARTE DA MODIFICARE %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
    \end{tabular}
  \caption{Requisiti - Componenti} %INSERIRE DIDASCALIA - SE NECESSARIA -
  \label{tab:requisiti}
  \end{center}
\end{table}

\end{document}
